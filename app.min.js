!function(){"use strict";function e(){this.follow=function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},this.has=function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},this.remove=function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},this.send=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this._listeners){var n=this._listeners,i=n[e];if(void 0!==i){t.target=this;for(var o=i.slice(0),a=0,r=o.length;a<r;a++)o[a].call(this,t)}}},this.destroy=function(){this._listeners=null}}function t(){return new e}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){if("[object Object]"===Object.prototype.toString.call(e)){var t=[];for(var n in e)t.push(e[n]);return t}return"string"==typeof e||null==e?[]:e}var o={toObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)?e:e={}},toArray:i,decodeJson:function(e,t){var n=t||{};if(e)try{n=JSON.parse(e)}catch(e){}return n},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},extend:function(e,t,i){for(var o in t)"object"==n(t[o])?(null==e[o]&&(e[o]="[object Array]"==Object.prototype.toString.call(t[o])?[]:{}),this.extend(e[o],t[o],i)):(null==e[o]||i)&&(e[o]=t[o])},getKeys:function(e,t){var n=t||[];for(var i in e)n.push(i);return n},getValues:function(e,t){var n=t||[];for(var i in e)n.push(e[i]);return n},insert:function(e,t,n){e.splice(t,0,n)},clone:function(e){return JSON.parse(JSON.stringify(e))},remove:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},destroy:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"destroy",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=i(e),a=o.length-1;a>=0;a--)o[a]&&o[a][t]&&o[a][t](n)},empty:function(e,t){for(var n in t)e[n]||(e[n]=t[n])}},a={head:'<div class="head">\n    <div class="head__body">\n        <div class="head__logo-icon">\n            <img src="./img/logo-icon.svg" />\n        </div>\n\n        <div class="head__split"></div>\n\n        <div class="head__logo">\n            <img src="./img/logo.svg" />\n        </div>\n\n        <div class="head__title">\n            \n        </div>\n\n        <div class="head__action head__settings selector open--settings">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            viewBox="0 0 368 368" style="enable-background:new 0 0 368 368;" xml:space="preserve">\n            <g>\n                <g>\n                    <path fill="currentColor" d="M344,144h-29.952c-2.512-8.2-5.8-16.12-9.792-23.664l21.16-21.16c4.528-4.528,7.024-10.56,7.024-16.984\n                        c0-6.416-2.496-12.448-7.024-16.976l-22.64-22.64c-9.048-9.048-24.888-9.072-33.952,0l-21.16,21.16\n                        c-7.536-3.992-15.464-7.272-23.664-9.792V24c0-13.232-10.768-24-24-24h-32c-13.232,0-24,10.768-24,24v29.952\n                        c-8.2,2.52-16.12,5.8-23.664,9.792l-21.168-21.16c-9.36-9.36-24.592-9.36-33.952,0l-22.648,22.64\n                        c-9.352,9.36-9.352,24.592,0,33.952l21.16,21.168c-3.992,7.536-7.272,15.464-9.792,23.664H24c-13.232,0-24,10.768-24,24v32\n                        C0,213.232,10.768,224,24,224h29.952c2.52,8.2,5.8,16.12,9.792,23.664l-21.16,21.168c-9.36,9.36-9.36,24.592,0,33.952\n                        l22.64,22.648c9.36,9.352,24.592,9.352,33.952,0l21.168-21.16c7.536,3.992,15.464,7.272,23.664,9.792V344\n                        c0,13.232,10.768,24,24,24h32c13.232,0,24-10.768,24-24v-29.952c8.2-2.52,16.128-5.8,23.664-9.792l21.16,21.168\n                        c9.072,9.064,24.912,9.048,33.952,0l22.64-22.64c4.528-4.528,7.024-10.56,7.024-16.976c0-6.424-2.496-12.448-7.024-16.976\n                        l-21.16-21.168c3.992-7.536,7.272-15.464,9.792-23.664H344c13.232,0,24-10.768,24-24v-32C368,154.768,357.232,144,344,144z\n                            M352,200c0,4.408-3.584,8-8,8h-36c-3.648,0-6.832,2.472-7.744,6c-2.832,10.92-7.144,21.344-12.832,30.976\n                        c-1.848,3.144-1.344,7.144,1.232,9.72l25.44,25.448c1.504,1.504,2.336,3.512,2.336,5.664c0,2.152-0.832,4.16-2.336,5.664\n                        l-22.64,22.64c-3.008,3.008-8.312,3.008-11.328,0l-25.44-25.44c-2.576-2.584-6.576-3.08-9.728-1.232\n                        c-9.616,5.68-20.04,10-30.968,12.824c-3.52,0.904-5.992,4.088-5.992,7.736v36c0,4.408-3.584,8-8,8h-32c-4.408,0-8-3.592-8-8v-36\n                        c0-3.648-2.472-6.832-6-7.744c-10.92-2.824-21.344-7.136-30.976-12.824c-1.264-0.752-2.664-1.112-4.064-1.112\n                        c-2.072,0-4.12,0.8-5.664,2.344l-25.44,25.44c-3.128,3.12-8.2,3.12-11.328,0l-22.64-22.64c-3.128-3.128-3.128-8.208,0-11.328\n                        l25.44-25.44c2.584-2.584,3.088-6.584,1.232-9.72c-5.68-9.632-10-20.048-12.824-30.976c-0.904-3.528-4.088-6-7.736-6H24\n                        c-4.408,0-8-3.592-8-8v-32c0-4.408,3.592-8,8-8h36c3.648,0,6.832-2.472,7.744-6c2.824-10.92,7.136-21.344,12.824-30.976\n                        c1.856-3.144,1.352-7.144-1.232-9.72l-25.44-25.44c-3.12-3.12-3.12-8.2,0-11.328l22.64-22.64c3.128-3.128,8.2-3.12,11.328,0\n                        l25.44,25.44c2.584,2.584,6.576,3.096,9.72,1.232c9.632-5.68,20.048-10,30.976-12.824c3.528-0.912,6-4.096,6-7.744V24\n                        c0-4.408,3.592-8,8-8h32c4.416,0,8,3.592,8,8v36c0,3.648,2.472,6.832,6,7.744c10.928,2.824,21.352,7.144,30.968,12.824\n                        c3.152,1.856,7.152,1.36,9.728-1.232l25.44-25.44c3.016-3.024,8.32-3.016,11.328,0l22.64,22.64\n                        c1.504,1.504,2.336,3.52,2.336,5.664s-0.832,4.16-2.336,5.664l-25.44,25.44c-2.576,2.584-3.088,6.584-1.232,9.72\n                        c5.688,9.632,10,20.048,12.832,30.976c0.904,3.528,4.088,6,7.736,6h36c4.416,0,8,3.592,8,8V200z"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <path fill="currentColor" d="M184,112c-39.696,0-72,32.304-72,72s32.304,72,72,72c39.704,0,72-32.304,72-72S223.704,112,184,112z M184,240\n                        c-30.88,0-56-25.12-56-56s25.12-56,56-56c30.872,0,56,25.12,56,56S214.872,240,184,240z"/>\n                </g>\n            </g>\n            </svg>\n        </div>\n\n        <div class="head__action head__settings selector open--notice notice--icon">\n            <svg enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path fill="currentColor" d="m411 262.862v-47.862c0-69.822-46.411-129.001-110-148.33v-21.67c0-24.813-20.187-45-45-45s-45 20.187-45 45v21.67c-63.59 19.329-110 78.507-110 148.33v47.862c0 61.332-23.378 119.488-65.827 163.756-4.16 4.338-5.329 10.739-2.971 16.267s7.788 9.115 13.798 9.115h136.509c6.968 34.192 37.272 60 73.491 60 36.22 0 66.522-25.808 73.491-60h136.509c6.01 0 11.439-3.587 13.797-9.115s1.189-11.929-2.97-16.267c-42.449-44.268-65.827-102.425-65.827-163.756zm-170-217.862c0-8.271 6.729-15 15-15s15 6.729 15 15v15.728c-4.937-.476-9.94-.728-15-.728s-10.063.252-15 .728zm15 437c-19.555 0-36.228-12.541-42.42-30h84.84c-6.192 17.459-22.865 30-42.42 30zm-177.67-60c34.161-45.792 52.67-101.208 52.67-159.138v-47.862c0-68.925 56.075-125 125-125s125 56.075 125 125v47.862c0 57.93 18.509 113.346 52.671 159.138z"/><path fill="currentColor" d="m451 215c0 8.284 6.716 15 15 15s15-6.716 15-15c0-60.1-23.404-116.603-65.901-159.1-5.857-5.857-15.355-5.858-21.213 0s-5.858 15.355 0 21.213c36.831 36.831 57.114 85.8 57.114 137.887z"/><path fill="currentColor" d="m46 230c8.284 0 15-6.716 15-15 0-52.086 20.284-101.055 57.114-137.886 5.858-5.858 5.858-15.355 0-21.213-5.857-5.858-15.355-5.858-21.213 0-42.497 42.497-65.901 98.999-65.901 159.099 0 8.284 6.716 15 15 15z"/></g></svg>\n        </div>\n\n        <div class="head__split"></div>\n\n        <div class="head__time">\n            <div class="head__time-now time--clock"></div>\n            <div>\n                <div class="head__time-date time--full"></div>\n                <div class="head__time-week time--week"></div>\n            </div>\n        </div>\n    </div>\n</div>',wrap:'<div class="wrap layer--height layer--width">\n    <div class="wrap__left layer--height"></div>\n    <div class="wrap__content layer--height layer--width"></div>\n</div>',menu:'<div class="menu">\n\n    <div class="menu__case">\n        <ul class="menu__list">\n            <li class="menu__item selector" data-action="search">\n                <div class="menu__ico"><img src="./img/icons/menu/browse.svg" /></div>\n                <div class="menu__text">Поиск</div>\n            </li>\n\n            <li class="menu__item selector" data-action="main">\n                <div class="menu__ico"><img src="./img/icons/menu/home.svg" /></div>\n                <div class="menu__text">Главная</div>\n            </li>\n\n            <li class="menu__item selector" data-action="movie">\n                <div class="menu__ico"><img src="./img/icons/menu/movie.svg" /></div>\n                <div class="menu__text">Фильмы</div>\n            </li>\n\n            <li class="menu__item selector" data-action="tv">\n                <div class="menu__ico"><img src="./img/icons/menu/tv.svg" /></div>\n                <div class="menu__text">Сериалы</div>\n            </li>\n\n            <li class="menu__item selector" data-action="catalog">\n                <div class="menu__ico"><img src="./img/icons/menu/catalog.svg" /></div>\n                <div class="menu__text">Каталог</div>\n            </li>\n        </ul>\n    </div>\n\n    <div class="menu__split"></div>\n\n    <div class="menu__case">\n        <ul class="menu__list">\n            <li class="menu__item selector" data-action="favorite" data-type="book">\n                <div class="menu__ico"><img src="./img/icons/menu/bookmark.svg" /></div>\n                <div class="menu__text">Закладки</div>\n            </li>\n\n            <li class="menu__item selector" data-action="favorite" data-type="like">\n                <div class="menu__ico"><img src="./img/icons/menu/like.svg" /></div>\n                <div class="menu__text">Нравится</div>\n            </li>\n\n            <li class="menu__item selector" data-action="favorite" data-type="wath">\n                <div class="menu__ico"><img src="./img/icons/menu/time.svg" /></div>\n                <div class="menu__text">Позже</div>\n            </li>\n        </ul>\n    </div>\n\n    <div class="menu__split"></div>\n\n    <div class="menu__case">\n        <ul class="menu__list">\n            <li class="menu__item selector" data-action="settings">\n                <div class="menu__ico"><img src="./img/icons/menu/settings.svg" /></div>\n                <div class="menu__text">Настройки</div>\n            </li>\n\n            <li class="menu__item selector" data-action="about">\n                <div class="menu__ico"><img src="./img/icons/menu/info.svg" /></div>\n                <div class="menu__text">О приложении</div>\n            </li>\n        </ul>\n    </div>\n</div>',activitys:'<div class="activitys layer--width">\n    <div class="activitys__slides"></div>\n</div>',activity:'<div class="activity layer--width">\n    <div class="activity__body"></div>\n    <div class="activity__loader"></div>\n</div>',settings:'<div class="settings">\n    <div class="settings__layer"></div>\n    <div class="settings__content layer--height">\n        <div class="settings__head">\n            <div class="settings__title">Настройки</div>\n        </div>\n        <div class="settings__body"></div>\n    </div>\n</div>',settings_main:'<div>\n    <div class="settings-folder selector" data-component="interface">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/panel.svg" />\n        </div>\n        <div class="settings-folder__name">Интерфейс</div>\n    </div>\n    <div class="settings-folder selector" data-component="parser">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/parser.svg" />\n        </div>\n        <div class="settings-folder__name">Парсер</div>\n    </div>\n    <div class="settings-folder selector" data-component="server">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/server.svg" />\n        </div>\n        <div class="settings-folder__name">TorrServer</div>\n    </div>\n    <div class="settings-folder selector" data-component="more">\n        <div class="settings-folder__icon">\n            <img src="./img/icons/settings/more.svg" />\n        </div>\n        <div class="settings-folder__name">Остальное</div>\n    </div>\n</div>',settings_interface:'<div>\n    <div class="settings-param selector" data-type="toggle" data-name="interface_size">\n        <div class="settings-param__name">Размер интерфейса</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param-title"><span>Фон</span></div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="background">\n        <div class="settings-param__name">Показывать фон</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="background_type">\n        <div class="settings-param__name">Тип фона</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param-title"><span>Быстродействие</span></div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="animation">\n        <div class="settings-param__name">Анимация</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Анимация карточек и контента</div>\n    </div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="mask">\n        <div class="settings-param__name">Затухание</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Плавное затухание карточек снизу и сверху</div>\n    </div>\n</div>',settings_parser:'<div>\n    <div class="settings-param selector" data-type="toggle" data-name="parser_use">\n        <div class="settings-param__name">Использовать парсер</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Тем самым, вы соглашаетесь принять всю отвественность на себя за использования публичных ссылок, для просмотра торрент и онлайн контента</div>\n    </div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="parser_torrent_type">\n        <div class="settings-param__name">Тип парсера для торрентов</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param-title"><span>Jackett</span></div>\n\n    <div class="settings-param selector" data-type="input" data-name="jackett_url" placeholder="Например: 192.168.х">\n        <div class="settings-param__name">Ссылка</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Укажите ссылку на скрипт Jackett</div>\n    </div>\n\n    <div class="settings-param selector" data-type="input" data-name="jackett_key" placeholder="Например: sa0sk83d..">\n        <div class="settings-param__name">Api ключ</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Находится в Jackett</div>\n    </div>\n\n    <div class="settings-param-title"><span>Torlook</span></div>\n\n    <div class="settings-param selector" data-type="input" data-name="torlook_site" placeholder="...">\n        <div class="settings-param__name">Сайт</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Сайт с которого парсить</div>\n    </div>\n\n    <div class="settings-param selector is--torllok" data-type="toggle" data-name="torlook_parse_type">\n        <div class="settings-param__name">Метод парсинга сайта TorLook</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param selector is--torllok" data-type="input" data-name="parser_website_url" placeholder="Например: scraperapi.com">\n        <div class="settings-param__name">Ссылка на парсер сайтов</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Зарегистрируйтесь на сайте scraperapi.com, прописать ссылку api.scraperapi.com?api_key=...&url={q}<br>В {q} будет поставлятся сайт w41.torlook.info</div>\n    </div>\n</div>',settings_server:'<div>\n    <div class="settings-param selector" data-type="input" data-name="torrserver_url" placeholder="Например: 192.168.х">\n        <div class="settings-param__name">Ссылка</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Укажите ссылку на скрипт TorrServer</div>\n    </div>\n    \n    <div class="settings-param selector" data-type="toggle" data-name="torrserver_savedb">\n        <div class="settings-param__name">Сохранить в базу</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Торрент будет добавлен в базу TorrServer</div>\n    </div>\n\n    <div class="settings-param-title"><span>Авторизация</span></div>\n\n    <div class="settings-param selector" data-type="toggle" data-name="torrserver_auth">\n        <div class="settings-param__name">Вход по паролю</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param selector" data-type="input" data-name="torrserver_login" placeholder="Не указан">\n        <div class="settings-param__name">Логин</div>\n        <div class="settings-param__value"></div>\n    </div>\n\n    <div class="settings-param selector" data-type="input" data-name="torrserver_password" placeholder="Не указан">\n        <div class="settings-param__name">Пароль</div>\n        <div class="settings-param__value"></div>\n    </div>\n</div>',settings_more:'<div>\n    <div class="settings-param selector" data-type="toggle" data-name="pages_save_total">\n        <div class="settings-param__name">Сколько страниц хранить в памяти</div>\n        <div class="settings-param__value"></div>\n        <div class="settings-param__descr">Хранит страницы в том состояние, в котором вы её покинули</div>\n    </div>\n</div>',scroll:'<div class="scroll">\n    <div class="scroll__content">\n        <div class="scroll__body">\n            \n        </div>\n    </div>\n</div>',items_line:'<div class="items-line">\n    <div class="items-line__head">\n        <div class="items-line__title">{title}</div>\n    </div>\n    <div class="items-line__body"></div>\n</div>',card:'<div class="card selector">\n    <div class="card__view">\n        <img src="./img/img_load.svg" class="card__img" />\n    </div>\n\n    <div class="card__icons">\n        <div class="card__icons-inner">\n            \n        </div>\n    </div>\n    \n    <div class="card__title">{title}</div>\n    <div class="card__age">{release_date}</div>\n\n    \n</div>',full_start:'<div class="full-start">\n\n    <div class="full-start__body">\n        <div class="full-start__right">\n            <div class="full-start__poster">\n                <img src="{img}" class="full-start__img" />\n            </div>\n        </div>\n\n        <div class="full-start__left">\n            <div class="full-start__tags">\n                <div class="full-start__tag">\n                    <img src="./img/icons/pulse.svg" /> <div>{genres}</div>\n                </div>\n                <div class="full-start__tag">\n                    <img src="./img/icons/time.svg" /> <div>{time}</div>\n                </div>\n                <div class="full-start__tag hide is--serial">\n                    <img src="./img/icons/menu/catalog.svg" /> <div>{seasons}</div>\n                </div>\n                <div class="full-start__tag hide is--serial">\n                    <img src="./img/icons/menu/movie.svg" /> <div>{episodes}</div>\n                </div>\n            </div>\n\n            <div class="full-start__title">{title}</div>\n            <div class="full-start__title-original">{original_title}</div>\n\n            <div class="full-start__descr">{descr}</div>\n        </div>\n\n        \n    </div>\n\n    <div class="full-start__buttons">\n        <div class="full-start__button selector view--trailer">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n            <g>\n                <g>\n                    <path fill="currentColor" d="M482.909,67.2H29.091C13.05,67.2,0,80.25,0,96.291v319.418C0,431.75,13.05,444.8,29.091,444.8h453.818\n                        c16.041,0,29.091-13.05,29.091-29.091V96.291C512,80.25,498.95,67.2,482.909,67.2z M477.091,409.891H34.909V102.109h442.182\n                        V409.891z"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="126.836" y="84.655" width="34.909" height="342.109"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="350.255" y="84.655" width="34.909" height="342.109"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="367.709" y="184.145" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="17.455" y="184.145" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="367.709" y="292.364" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            <g>\n                <g>\n                    <rect fill="currentColor" x="17.455" y="292.364" width="126.836" height="34.909"/>\n                </g>\n            </g>\n            \n            </svg>\n\n            <span>Трейлеры</span>\n        </div>\n\n        <div class="full-start__button view--torrent hide">\n            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" version="1.1" width="512" height="512" x="0" y="0" viewBox="0 0 30.051 30.051" style="enable-background:new 0 0 512 512" xml:space="preserve" class="">\n            <g xmlns="http://www.w3.org/2000/svg">\n                <path d="M19.982,14.438l-6.24-4.536c-0.229-0.166-0.533-0.191-0.784-0.062c-0.253,0.128-0.411,0.388-0.411,0.669v9.069   c0,0.284,0.158,0.543,0.411,0.671c0.107,0.054,0.224,0.081,0.342,0.081c0.154,0,0.31-0.049,0.442-0.146l6.24-4.532   c0.197-0.145,0.312-0.369,0.312-0.607C20.295,14.803,20.177,14.58,19.982,14.438z" fill="currentColor"/>\n                <path d="M15.026,0.002C6.726,0.002,0,6.728,0,15.028c0,8.297,6.726,15.021,15.026,15.021c8.298,0,15.025-6.725,15.025-15.021   C30.052,6.728,23.324,0.002,15.026,0.002z M15.026,27.542c-6.912,0-12.516-5.601-12.516-12.514c0-6.91,5.604-12.518,12.516-12.518   c6.911,0,12.514,5.607,12.514,12.518C27.541,21.941,21.937,27.542,15.026,27.542z" fill="currentColor"/>\n            </g></svg>\n\n            <span>Торренты</span>\n        </div>\n\n        <div class="full-start__button selector open--menu">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M436.742,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.755,75.258,75.258,75.258\n                            C478.239,331.258,512,297.503,512,256C512,214.503,478.239,180.742,436.742,180.742z M436.742,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246s38.246,17.155,38.246,38.246\n                            S457.833,294.246,436.742,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M256,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.761,75.258,75.258,75.258c41.503,0,75.258-33.755,75.258-75.258\n                            C331.258,214.503,297.503,180.742,256,180.742z M256,294.246c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246\n                            s38.246,17.155,38.246,38.246S277.091,294.246,256,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M75.258,180.742C33.761,180.742,0,214.503,0,256c0,41.503,33.761,75.258,75.258,75.258\n                            c41.497,0,75.258-33.755,75.258-75.258C150.516,214.503,116.755,180.742,75.258,180.742z M75.258,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246c21.091,0,38.246,17.155,38.246,38.246\n                            S96.342,294.246,75.258,294.246z"/>\n                    </g>\n                </g>\n            </svg>\n        </div>\n\n        <div class="full-start__icons">\n            <div class="info__icon icon--book"></div>\n            <div class="info__icon icon--like"></div>\n            <div class="info__icon icon--wath"></div>\n        </div>\n\n        <div class="info__rate"><span>{r_themovie}</span></div>\n    </div>\n</div>',full_descr:'<div class="full-descr">\n    <div class="full-descr__left">\n        <div class="full-descr__text">{text}</div>\n\n        <div class="full-descr__line">\n            <div class="full-descr__line-name">Жанр</div>\n            <div class="full-descr__line-body">{genres}</div>\n        </div>\n\n        <div class="full-descr__line">\n            <div class="full-descr__line-name">Производство</div>\n            <div class="full-descr__line-body">{companies}</div>\n        </div>\n    </div>\n\n    <div class="full-descr__right">\n        <div class="full-descr__info">\n            <div class="full-descr__info-name">Дата релиза</div>\n            <div class="full-descr__info-body">{relise}</div>\n        </div>\n\n        <div class="full-descr__info">\n            <div class="full-descr__info-name">Бюджет</div>\n            <div class="full-descr__info-body">{budget}</div>\n        </div>\n\n        <div class="full-descr__info">\n            <div class="full-descr__info-name">Страны</div>\n            <div class="full-descr__info-body">{countries}</div>\n        </div>\n    </div>\n</div>',full_actor:'<div class="full-actor selector">\n    <img src="{img}" class="full-actor__foto" />\n\n    <div class="full-actor__body">\n        <div class="full-actor__firstname">{firstname}</div>\n        <div class="full-actor__lastname">{lastname}</div>\n    </div>\n</div>',full_review:'<div class="full-review selector">\n    <img src="{img}" class="full-actor__foto" />\n\n   \n</div>',player:'<div class="player">\n    \n</div>',player_panel:'<div class="player-panel">\n\n    <div class="player-panel__body">\n        <div class="player-panel__timeline">\n            <div class="player-panel__peding"></div>\n            <div class="player-panel__position"><div></div></div>\n            <div class="player-panel__time hide"></div>\n        </div>\n\n        <div class="player-panel__line">\n            <div class="player-panel__timenow"></div>\n            <div class="player-panel__timeend"></div>\n        </div>\n\n        <div class="player-panel__line">\n            <div class="player-panel__left">\n                <div class="player-panel__prev button selector"></div>\n                <div class="player-panel__next button selector"></div>\n            </div>\n            <div class="player-panel__center">\n                <div class="player-panel__rprev button selector">\n                    <svg width="35" height="25" viewBox="0 0 35 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M14 10.7679C12.6667 11.5377 12.6667 13.4622 14 14.232L31.25 24.1913C32.5833 24.9611 34.25 23.9989 34.25 22.4593L34.25 2.5407C34.25 1.0011 32.5833 0.0388526 31.25 0.808653L14 10.7679Z" fill="currentColor"/>\n                    <path d="M0.999998 10.7679C-0.333335 11.5377 -0.333333 13.4622 1 14.232L18.25 24.1913C19.5833 24.9611 21.25 23.9989 21.25 22.4593L21.25 2.5407C21.25 1.0011 19.5833 0.0388526 18.25 0.808653L0.999998 10.7679Z" fill="currentColor"/>\n                    </svg>\n                </div>\n                <div class="player-panel__playpause button selector"></div>\n                <div class="player-panel__rnext button selector">\n                    <svg width="35" height="25" viewBox="0 0 35 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M20.25 10.7679C21.5833 11.5377 21.5833 13.4622 20.25 14.232L3 24.1913C1.66666 24.9611 -6.72981e-08 23.9989 0 22.4593L8.70669e-07 2.5407C9.37967e-07 1.0011 1.66667 0.0388526 3 0.808653L20.25 10.7679Z" fill="currentColor"/>\n                    <path d="M33.25 10.7679C34.5833 11.5377 34.5833 13.4622 33.25 14.232L16 24.1913C14.6667 24.9611 13 23.9989 13 22.4593L13 2.5407C13 1.0011 14.6667 0.0388526 16 0.808653L33.25 10.7679Z" fill="currentColor"/>\n                    </svg>\n                </div>\n            </div>\n            <div class="player-panel__right">\n                <div class="player-panel__playlist button selector"></div>\n                <div class="player-panel__subs button selector hide"></div>\n                <div class="player-panel__size button selector"></div>\n            </div>\n        </div>\n    </div>\n</div>',player_video:'<div class="player-video">\n    <div class="player-video__display"></div>\n    <div class="player-video__loader"></div>\n    <div class="player-video__paused hide">\n        <svg width="19" height="25" viewBox="0 0 19 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <rect width="6" height="25" rx="2" fill="white"/>\n            <rect x="13" width="6" height="25" rx="2" fill="white"/>\n        </svg>\n    </div>\n</div>',player_info:'<div class="player-info">\n    <div class="player-info__name"></div>\n</div>',selectbox:'<div class="selectbox">\n    <div class="selectbox__layer"></div>\n    <div class="selectbox__content layer--height">\n        <div class="selectbox__head">\n            <div class="selectbox__title"></div>\n        </div>\n        <div class="selectbox__body"></div>\n    </div>\n</div>',selectbox_item:'<div class="selectbox-item selector">\n    <div class="selectbox-item__title">{title}</div>\n    <div class="selectbox-item__subtitle">{subtitle}</div>\n</div>',info:'<div class="info layer--width">\n    <div class="info__rate"><span></span></div>\n    <div class="info__left">\n        <div class="info__title"></div>\n        <div class="info__title-original"></div>\n        <div class="info__create"></div>\n    </div>\n    <div class="info__right">\n        <div class="info__icon icon--book"></div>\n        <div class="info__icon icon--like"></div>\n        <div class="info__icon icon--wath"></div>\n    </div>\n</div>',more:'<div class="card-more selector">\n    <div class="card-more__title">\n        Еще\n    </div>\n</div>',search:'<div class="search">\n    <div class="search__left">\n        <div class="search__title">Поиск</div>\n        <div class="search__input">Введите текст...</div>\n        <div class="search__keypad"><div class="simple-keyboard"></div></div>\n        <div class="search__history"></div>\n    </div>\n    <div class="search__results"></div>\n</div>',settings_input:'<div class="settings-input">\n    <div class="settings-input__content">\n        <div class="settings-input__input"></div>\n\n        <div class="simple-keyboard"></div>\n\n        <div class="settings-input__links">Выбрать ссылку</div>\n    </div>\n</div>',modal:'<div class="modal">\n    <div class="modal__content">\n        <div class="modal__head">\n            <div class="modal__title">{title}</div>\n        </div>\n        <div class="modal__body">\n            \n        </div>\n    </div>\n</div>',company:'<div class="company">\n    <div class="company__name">{name}</div>\n    <div class="company__headquarters">Штаб: {headquarters}</div>\n    <div class="company__homepage">Сайт: {homepage}</div>\n    <div class="company__country">Страна: {origin_country}</div>\n</div>',modal_loading:'<div class="modal-loading">\n    \n</div>',modal_pending:'<div class="modal-pending">\n    <div class="modal-pending__loading"></div>\n    <div class="modal-pending__text">{text}</div>\n</div>',actor_start:'<div class="actor-start">\n\n    <div class="actor-start__body">\n        <div class="actor-start__right">\n            <div class="actor-start__poster">\n                <img src="{img}" class="actor-start__img" />\n            </div>\n        </div>\n\n        <div class="actor-start__left">\n            <div class="actor-start__tags">\n                <div class="actor-start__tag">\n                    <img src="./img/icons/pulse.svg" /> <div>{birthday}</div>\n                </div>\n            </div>\n            \n            <div class="actor-start__name">{name}</div>\n            <div class="actor-start__place">{place}</div>\n\n            <div class="actor-start__descr">{descr}</div>\n\n\n            \n        </div>\n    </div>\n\n    <div class="full-start__buttons hide">\n        <div class="full-start__button selector">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M436.742,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.755,75.258,75.258,75.258\n                            C478.239,331.258,512,297.503,512,256C512,214.503,478.239,180.742,436.742,180.742z M436.742,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246s38.246,17.155,38.246,38.246\n                            S457.833,294.246,436.742,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M256,180.742c-41.497,0-75.258,33.761-75.258,75.258s33.761,75.258,75.258,75.258c41.503,0,75.258-33.755,75.258-75.258\n                            C331.258,214.503,297.503,180.742,256,180.742z M256,294.246c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246\n                            s38.246,17.155,38.246,38.246S277.091,294.246,256,294.246z"/>\n                    </g>\n                </g>\n                <g>\n                    <g>\n                        <path fill="currentColor" d="M75.258,180.742C33.761,180.742,0,214.503,0,256c0,41.503,33.761,75.258,75.258,75.258\n                            c41.497,0,75.258-33.755,75.258-75.258C150.516,214.503,116.755,180.742,75.258,180.742z M75.258,294.246\n                            c-21.091,0-38.246-17.155-38.246-38.246s17.155-38.246,38.246-38.246c21.091,0,38.246,17.155,38.246,38.246\n                            S96.342,294.246,75.258,294.246z"/>\n                    </g>\n                </g>\n            </svg>\n        </div>\n\n        <div class="full-start__icons">\n            <div class="info__icon icon--like"></div>\n        </div>\n    </div>\n</div>',empty:'<div class="empty">\n    <div class="empty__img selector"></div>\n    <div class="empty__title">Здесь пусто</div>\n    <div class="empty__descr">На данный момент список пустой</div>\n</div>',notice:'<div class="notice selector">\n    <div class="notice__time">{time}</div>\n    <div class="notice__title">{title}</div>\n    <div class="notice__descr">{descr}</div>\n</div>',torrent:'<div class="torrent-item selector">\n    <div class="torrent-item__title">{title}</div>\n    <div class="torrent-item__details">\n        <div class="torrent-item__date">{date}</div>\n        <div class="torrent-item__tracker">{tracker}</div>\n\n        <div class="torrent-item__seeds">Раздают: <span>{seeds}</span></div>\n        <div class="torrent-item__grabs">Качают: <span>{grabs}</span></div>\n        \n        <div class="torrent-item__size">{size}</div>\n    </div>\n</div>',torrent_file:'<div class="torrent-file selector">\n    <div class="torrent-file__title">{title}</div>\n    <div class="torrent-file__size">{size}</div>\n</div>',files:'<div class="files">\n    <div class="files__left">\n        <div class="full-start__poster">\n            <img src="{img}" class="full-start__img" />\n        </div>\n\n        <div class="files__title">{title}</div>\n        <div class="files__title-original">{original_title}</div>\n    </div>\n    <div class="files__body">\n        \n    </div>\n</div>',about:'<div class="about">\n    <div>Приложение полностью бесплатное и использует публичные ссылки для просмотра информации о фильмах, новинках, популярных фильмов и т.д. Вся доступная информация используется исключительно в познавательных целях, приложение не использует свои собственные серверы для распространения информации.</div>\n\n\n    <div class="about__contacts">\n        <div>\n            <small>Наш канал</small><br>\n            @lampa_channel\n        </div>\n\n        <div>\n            <small>Группа</small><br>\n            @lampa_group\n        </div>\n\n        <div>\n            <small>Версия</small><br>\n            1.2.1\n        </div>\n    </div>\n</div>',error:'<div class="error">\n    <div class="error__ico"></div>\n    <div class="error__body">\n        <div class="error__title">{title}</div>\n        <div class="error__text">{text}</div>\n    </div>\n</div>',torrent_noconnect:'<div class="error">\n    <div class="error__ico"></div>\n    <div class="error__body">\n        <div class="error__title">{title}</div>\n        <div class="error__text">{text}</div>\n    </div>\n</div>\n\n<div class="torrent-error noconnect">\n    <div>\n        <div>Причины</div>\n        <ul>\n            <li class="nocorect">Текуший адрес <code>{ip}</code> является неверным!</li>\n            <li>Текуший ответ: <code>{echo}</code></li>\n        </ul>\n    </div>\n\n    <div>\n        <div>Как правильно?</div>\n        <ul>\n            <li>Используйте адрес <code>192.168.0.ххх:8090</code></li>\n            <li>Используйте версию Matrix</li>\n        </ul>\n    </div>\n\n    <div>\n        <div>Как проверить?</div>\n        <ul>\n            <li>На этом же устройстве, откройте браузер и зайдите по адресу <code>{ip}/echo</code></li>\n            <li>Если же браузер не ответит, проверьте запущен ли TorrServe, или перезагрузите его.</li>\n            <li>Если же браузер ответил, убедитесь что в ответе есть строка <code>MatriX</code></li>\n        </ul>\n    </div>\n</div>',styles:"<style>\n.torrent-error > div + div {\n    margin-top: 1.3em; }\n\n.torrent-error > div {\n  line-height: 1.2; }\n  .torrent-error > div > div {\n    font-size: 1.4em; }\n  .torrent-error > div > ul {\n    margin: 0;\n    margin-top: 0.2em;\n    font-size: 1.2em;\n    font-weight: 300; }\n    .torrent-error > div > ul > li {\n      position: relative;\n      padding-left: 1em; }\n      .torrent-error > div > ul > li::before {\n        content: '';\n        display: block;\n        width: 0.3em;\n        height: 0.3em;\n        -webkit-border-radius: 100%;\n            -moz-border-radius: 100%;\n                border-radius: 100%;\n        background-color: #ddd;\n        position: absolute;\n        top: 0.5em;\n        left: 0; }\n      .torrent-error > div > ul > li + li {\n        margin-top: 0.2em; }\n\n.torrent-error code {\n  background-color: #4c4c4c;\n  -webkit-border-radius: 0.2em;\n      -moz-border-radius: 0.2em;\n          border-radius: 0.2em;\n  padding: 0 0.5em;\n  font-family: inherit;\n  font-size: inherit;\n  word-break: break-all; }\n\n.error + .torrent-error {\n  margin-top: 2em; }\n\n.search-box {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n      -moz-box-orient: vertical;\n      -moz-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  padding: 1.5em;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -moz-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -moz-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center; }\n\n.simple-button {\n  margin-right: 1em;\n  font-size: 1.3em;\n  background-color: rgba(0, 0, 0, 0.3);\n  padding: 0.3em 1.2em;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-border-radius: 5em;\n      -moz-border-radius: 5em;\n          border-radius: 5em;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -moz-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 2.8em;\n  -webkit-transition: background-color 0.3s;\n  -o-transition: background-color 0.3s;\n  -moz-transition: background-color 0.3s;\n  transition: background-color 0.3s; }\n  .simple-button > svg {\n    width: 1.5em;\n    height: 1.5em; }\n    .simple-button > svg + span {\n      margin-left: 1em; }\n  .simple-button.focus {\n    background-color: #fff;\n    color: #000; }\n\n.torrent-filter {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: flex;\n  margin-bottom: 2em; }\n\n.files__left .full-start__poster {\n  display: inline-block; }\n\n.console {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #1d1f20;\n  z-index: 100;\n  padding: 1.5em 0; }\n  .console__line {\n    padding: 0.3em 1.5em;\n    font-size: 1.1em;\n    line-height: 1.2;\n    word-break: break-all; }\n    .console__line:nth-child(2n) {\n      background-color: rgba(255, 255, 255, 0.05); }\n    .console__line.focus {\n      background-color: rgba(255, 255, 255, 0.2); }\n\n\nbody.no--mask .scroll--mask {\n  -webkit-mask-image: unset !important;\n          mask-image: unset !important; }\n\nbody.no--animation * {\n  -webkit-transition: none !important;\n  -o-transition: none !important;\n  -moz-transition: none !important;\n  transition: none !important; }\n\n.player-video__paused {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  width: 8em;\n  height: 8em;\n  -webkit-border-radius: 100%;\n      -moz-border-radius: 100%;\n          border-radius: 100%;\n  padding: 2em;\n  background-color: rgba(0, 0, 0, 0.5);\n  margin-left: -4em;\n  margin-top: -4em;\n  -webkit-backdrop-filter: blur(5px);\n          backdrop-filter: blur(5px); }\n\n.player-panel{\n  left: 1.5em;\n  bottom: 1.5em;\n  right: 1.5em;\n  width: auto;\n  padding: 1.5em;\n  -webkit-border-radius: 0.5em;\n    -moz-border-radius: 0.5em;\n          border-radius: 0.5em;\n  -webkit-backdrop-filter: blur(5px);\n          backdrop-filter: blur(5px); \n}\n\n.player-panel__timeline{\n  background-color: rgba(255, 255, 255, 0.1);\n    -webkit-border-radius: 2em;\n       -moz-border-radius: 2em;\n            border-radius: 2em;\n    margin-bottom: 0.6em;\n}\n.player-panel__peding, .player-panel__position{\n  -webkit-border-radius: 5em;\n       -moz-border-radius: 5em;\n            border-radius: 5em;\n}\n.player-panel__line + .player-panel__line {\n  margin-top: 1em; }\n\n.player-panel .button{\n  padding: 0.4em;\n}\n.player-panel__right .button + .button, .player-panel__left .button + .button {\n  margin-left: 1em; }\n\n.player-info {\n  position: fixed;\n  top: 1.5em;\n  left: 1.5em;\n  right: 1.5em;\n  background-color: rgba(0, 0, 0, 0.3);\n  opacity: 0;\n  -webkit-transform: translateY(-100%);\n      -moz-transform: translateY(-100%);\n      -ms-transform: translateY(-100%);\n        -o-transform: translateY(-100%);\n          transform: translateY(-100%);\n  -webkit-transition: opacity 0.3s, -webkit-transform 0.3s;\n  transition: opacity 0.3s, -webkit-transform 0.3s;\n  -o-transition: opacity 0.3s, -o-transform 0.3s;\n  -moz-transition: transform 0.3s, opacity 0.3s, -moz-transform 0.3s;\n  transition: transform 0.3s, opacity 0.3s;\n  transition: transform 0.3s, opacity 0.3s, -webkit-transform 0.3s, -moz-transform 0.3s, -o-transform 0.3s;\n  padding: 1.5em;\n  -webkit-border-radius: 0.5em;\n      -moz-border-radius: 0.5em;\n          border-radius: 0.5em;\n  -webkit-backdrop-filter: blur(5px);\n          backdrop-filter: blur(5px); }\n  .player-info.info--visible {\n    -webkit-transform: translateY(0);\n        -moz-transform: translateY(0);\n        -ms-transform: translateY(0);\n          -o-transform: translateY(0);\n            transform: translateY(0);\n    opacity: 1; }\n  .player-info__name {\n    font-size: 1.5em;\n    word-break: break-all; }\n\n.torrent-file__title .exe {\n  -webkit-border-radius: 0.3em;\n      -moz-border-radius: 0.3em;\n          border-radius: 0.3em;\n  background: #262829;\n  padding: 0.2em 0.4em;\n  display: inline-block; }\n</style>",torrent_nocheck:'<div class="error">\n    <div class="error__ico"></div>\n    <div class="error__body">\n        <div class="error__title">{title}</div>\n        <div class="error__text">{text}</div>\n    </div>\n</div>\n\n<div class="torrent-error noconnect">\n    <div>\n        <div>Причины</div>\n        <ul>\n            <li>Запрос на пинг вернул неверный формат</li>\n            <li>Ответ от TorServer: <code>{echo}</code></li>\n        </ul>\n    </div>\n\n    <div>\n        <div>Что делать?</div>\n        <ul>\n            <li>Убедитесь что у вас стоит версия Matrix</li>\n        </ul>\n    </div>\n\n    <div>\n        <div>Как проверить?</div>\n        <ul>\n            <li>Откройте браузер и зайдите по адресу <code>{ip}/echo</code></li>\n            <li>Убедитесь что в ответе есть наличие кода <code>MatriX</code></li>\n        </ul>\n    </div>\n</div>',torrent_nohash:'<div class="error">\n    <div class="error__ico"></div>\n    <div class="error__body">\n        <div class="error__title">{title}</div>\n        <div class="error__text">{text}</div>\n    </div>\n</div>\n\n<div class="torrent-error noconnect">\n    <div>\n        <div>Причины</div>\n        <ul>\n            <li>TorServer не смог скачать торрент файл</li>\n            <li>Ссылка: <code>{url}</code></li>\n        </ul>\n    </div>\n\n    <div class="is--jackett">\n        <div>Что делать?</div>\n        <ul>\n            <li>Проверьте правильно ли вы настроили Jackett</li>\n            <li>Приватные источники могут не выдавать ссылку на файл</li>\n            <li>Убедитесь что Jackett тоже может скачать файл</li>\n        </ul>\n    </div>\n\n    <div class="is--torlook">\n        <div>Что делать?</div>\n        <ul>\n            <li>Написать в нашу телеграм группу: @lampa_group</li>\n            <li>Укажите какой фильм, какая раздача и по возможности фото этой разадачи</li>\n        </ul>\n    </div>\n</div>',filter:'<div>\n    <div class="simple-button selector filter--search">\n            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n        <g>\n            <path fill="currentColor" d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474\n                c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323\n                c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848\n                S326.847,409.323,225.474,409.323z"/>\n        </g>\n        <g>\n            <path fill="currentColor" d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328\n                c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/>\n        </g>\n\n        </svg>\n\n        <span>Уточнить поиск</span>\n    </div>\n    <div class="simple-button selector filter--sort">\n\n        <span>Сортировать</span>\n    </div>\n\n    <div class="simple-button selector filter--filter">\n\n        <span>Фильтр</span>\n    </div>\n</div>',search_box:'<div class="search-box search">\n    <div class="search-box__input search__input"></div>\n    <div class="search-box__keypad search__keypad"><div class="simple-keyboard"></div></div>\n</div>',console:'<div class="console">\n    \n</div>'};var r={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=a[e];if(!i)throw"Шаблон: "+e+" не найден!";for(var o in t)i=i.replace(new RegExp("{"+o+"}","g"),t[o]);return i=i.replace(/{\@([a-z_-]+)}/g,(function(e,t){return a[t]||""})),n?i:$(i)}},s={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,o,a,r,l,c="",d=0;for(e=s._utf8_encode(e);d<e.length;)o=(t=e.charCodeAt(d++))>>2,a=(3&t)<<4|(n=e.charCodeAt(d++))>>4,r=(15&n)<<2|(i=e.charCodeAt(d++))>>6,l=63&i,isNaN(n)?r=l=64:isNaN(i)&&(l=64),c=c+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(r)+this._keyStr.charAt(l);return c},decode:function(e){var t,n,i,o,a,r,l="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(o=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(a=this._keyStr.indexOf(e.charAt(c++)))>>2,i=(3&a)<<6|(r=this._keyStr.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!=a&&(l+=String.fromCharCode(n)),64!=r&&(l+=String.fromCharCode(i));return l=s._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=c1=c2=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),n+=3);return t}};function l(){var e,n,i=t(),a=[],r={timeout:6e4};function l(e,t){return 0===e.status&&"timeout"!==t?"Нет подключения к сети.":404==e.status?"Запрошенная страница не найдена. [404]":401==e.status?"Авторизация не удалась":500==e.status?"Внутренняя ошибка сервера. [500]":"parsererror"===t?"Запрошенный синтаксический анализ JSON завершился неудачно.":"timeout"===t?"Время запроса истекло.":"abort"===t?"Запрос был прерван.":"custom"===t?e.responseText:"Неизвестная ошибка: "+e.responseText}function c(e){i.send("go"),n=e,e.start&&e.start();var t={dataType:e.dataType||"json",url:e.url,timeout:r.timeout,crossDomain:!0,success:function(t){console.log("Reguest","result of "+e.url+" :",t),function(t){if(e.before_complite&&e.before_complite(t),e.complite)try{e.complite(t)}catch(e){console.log("Reguest","complite error:",e.message+"\n\n"+e.stack)}e.after_complite&&e.after_complite(t),e.end&&e.end()}(t)},error:function(t,n){console.log("Reguest","error of "+e.url+" :",l(t,n)),e.before_error&&e.before_error(t,n),e.error&&e.error(t,n),e.after_error&&e.after_error(t,n),e.end&&e.end()},beforeSend:function(t){var n=ln.get("torrserver_auth"),i=ln.get("torrserver_url");n&&e.url.indexOf(i)>-1&&t.setRequestHeader("Authorization","Basic "+s.encode(ln.get("torrserver_login")+":"+ln.get("torrserver_password")))}};e.post_data&&(t.type="POST",t.data=e.post_data),$.ajax(t),r.timeout=6e4}this.timeout=function(e){r.timeout=e},this.get=function(e,t,n,o){clear(),c({url:e,post_data:o,start:function(){i.send("start")},before_complite:function(){i.send("before_complite")},complite:function(e){t&&t(e)},after_complite:function(){i.send("after_complite")},before_error:function(){i.send("before_error")},error:function(e){n&&n(e)},after_error:function(){i.send("after_error")},end:function(){i.send("end")}})},this.quiet=function(e,t,n,i,a){var r={};a&&(r=a);var s={url:e,post_data:i,complite:function(e){t&&t(e)},error:function(e){n&&n(e)}};o.extend(s,r,!0),c(s)},this.silent=function(e,t,n,r,s){var l={};s&&(l=s);var d={url:e,complite:t,error:n};a.push(d);var u={url:e,post_data:r,complite:function(e){-1!==a.indexOf(d)&&d.complite&&d.complite(e)},error:function(e){-1!==a.indexOf(d)&&d.error&&d.error(e)},end:function(){i.send("end")}};o.extend(u,l,!0),c(u)},this.last=function(t,n,i,o){e={url:t,complite:n,error:i},c({url:t,post_data:o,complite:function(t){e&&e.complite&&e.complite(t)},error:function(t){e&&e.error&&e.error(t)},end:function(){dispatchEvent({type:"load:end"})}})},this.native=function(e,t,s,l,d){var u={};d&&(u=d);var v={url:e,complite:t,error:s};a.push(v);var g={url:e,post_data:l,complite:function(e){-1!==a.indexOf(v)&&v.complite&&v.complite(e)},error:function(e){-1!==a.indexOf(v)&&v.error&&v.error(e)},end:function(){i.send("end")}};o.extend(g,u,!0),function(e){i.send("go"),n=e,e.start&&e.start();ln.get("platform","");c(e);r.timeout=6e4}(g)},this.clear=function(){a=[]},this.again=function(e){(e||n)&&c(e||n)},this.latest=function(){return n},this.errorDecode=function(e,t){return l(e,t)}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.get("scroll"),n=t.find(".scroll__body"),i=t.find(".scroll__content");t.toggleClass("scroll--horizontal",!!e.horizontal),t.toggleClass("scroll--mask",!!e.mask),t.toggleClass("scroll--over",!!e.over),t.toggleClass("scroll--nopadding",!!e.nopadding),this.update=function(t,o){var a=e.horizontal?"left":"top",r=e.horizontal?"width":"height",s=t.offset()[a],l=n.offset()[a]+(o?i[r]()/2-t[r]()/2:0),c=Math.min(0,l-s);n.css("transform","translate3d("+(e.horizontal?c:0)+"px, "+(e.horizontal?0:c)+"px, 0px)")},this.append=function(e){n.append(e)},this.minus=function(e){t.addClass("layer--wheight"),e&&t.data("mheight",e)},this.body=function(){return n},this.render=function(e){return e&&n.append(e),t},this.clear=function(){n.empty()},this.reset=function(){n.css("transform","translate3d(0px, 0px, 0px)")},this.destroy=function(){t.remove(),n=null,i=null,t=null}}var d={};function u(){ln.set("favorite",d)}function v(e,t){d[e].indexOf(t.id)<0&&(o.insert(d[e],0,t.id),function(e){for(var t,n=0;n<d.card.length;n++){var i=d.card[n];if(i.id==e){t=i;break}}return t}(t.id)||d.card.push(t),u())}function g(e,t){o.remove(d[e],t.id);for(var n=d.card.length-1;n>=0;n--){var i=d.card[n];f(i).any||o.remove(d.card,i)}u()}function f(e){var t={like:d.like.indexOf(e.id)>-1,wath:d.wath.indexOf(e.id)>-1,book:d.book.indexOf(e.id)>-1,any:!0};return t.like||t.wath||t.book||(t.any=!1),t}var p={check:f,add:v,remove:g,toggle:function(e,t){f(t)[e]?g(e,t):v(e,t)},get:function(e){var t=[];return d[e.type].forEach((function(e){for(var n=0;n<d.card.length;n++){var i=d.card[n];i.id==e&&t.push(i)}})),t},init:function(){d=ln.get("favorite","{}"),o.extend(d,{like:[],wath:[],book:[],card:[]})}};function m(){return"https:"==window.protocol?"https://":"http://"}var h={secondsToTime:function(e,t){var n=parseInt(e,10),i=Math.floor(n/3600),o=Math.floor((n-3600*i)/60),a=n-3600*i-60*o;return i<10&&(i="0"+i),o<10&&(o="0"+o),a<10&&(a="0"+a),t?i+":"+o:i+":"+o+":"+a},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},substr:function(e,t){return(e=e||"").length>t?e.substr(0,t)+"...":e},numberWithSpaces:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},time:function(e){return new function(){var t=["Январь","Февраль","Март","Апрель","Ма","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],n=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"];this.moth=function(e){var n=t[e];return"ь"==n.slice(-1)?n.slice(0,n.length-1)+"я":"Ма"==n?n+"я":n+"а"},this.tik=function(){var i=new Date,o=i.getTime(),a=parseInt("0");(o=[(i=new Date(o+1e3*a*60*60)).getHours(),i.getMinutes(),i.getSeconds(),i.getFullYear()])[0]<10&&(o[0]="0"+o[0]),o[1]<10&&(o[1]="0"+o[1]),o[2]<10&&(o[2]="0"+o[2]);var r=[o[0],o[1]].join(":"),s=i.getDay(),l=i.getDate();$(".time--clock",e).text(r),$(".time--week",e).text(n[s]),$(".time--day",e).text(l),$(".time--moth",e).text(t[i.getMonth()]),$(".time--full",e).text(l+" "+this.moth(i.getMonth())+" "+o[3])},setInterval(this.tik.bind(this),1e3),this.tik()}},bytesToSize:function(e,t){if(0==e)return"0 Bytes";var n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];t&&(n=["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]);var i=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,i)).toFixed(2))+" "+n[i]},parseTime:function(e){var t=["Январь","Февраль","Март","Апрель","Ма","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],n=new Date(e),i=[n.getHours(),n.getMinutes(),n.getSeconds(),n.getFullYear()];i[0]<10&&(i[0]="0"+i[0]),i[1]<10&&(i[1]="0"+i[1]),i[2]<10&&(i[2]="0"+i[2]);var o,a,r=[i[0],i[1]].join(":"),s=n.getDay(),l=n.getDate();return{time:r,week:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"][s],day:l,mouth:t[n.getMonth()],full:l+" "+(o=n.getMonth(),a=t[o],("ь"==a.slice(-1)?a.slice(0,a.length-1)+"я":"Ма"==a?a+"я":a+"а")+" ")+i[3]}},checkHttp:function(e){return e=(e=e.replace(/https:\/\//,"")).replace(/http:\/\//,""),e=m()+e},shortText:function(e,t,n){if(e.length<=t)return e;var i=t-(n=n||"...").length,o=Math.ceil(i/2),a=Math.floor(i/2);return e.substr(0,o)+n+e.substr(e.length-a)},protocol:m,addUrlComponent:function(e,t){return e+(/\?/.test(e)?"&":"?")+t},sizeToBytes:function(e){var t=e.match(/([0-9\\.,]+)\s+(Mb|МБ|GB|ГБ|TB|ТБ)/i);if(t){var n=parseFloat(t[1].replace(",","."));return/gb|гб/.test(t[2].toLowerCase())&&(n*=1024),/tb|тб/.test(t[2].toLowerCase())&&(n*=1048576),1048576*n}return 0},putScript:function(e,t){var n=0;!function i(){if(n>=e.length)return t();var o=e[n],a=document.createElement("script");a.onload=i,a.onerror=i,a.setAttribute("src",o),document.body.appendChild(a),n++}(e[0])},clearTitle:function(e){return e.replace(/[^a-zа-я0-9\s]/gi,"")},cardImgBackground:function(e){return"poster"==ln.get("background_type","complex")&&e.backdrop_path?M.img(e.backdrop_path,"original"):e.poster_path?M.img(e.poster_path):""},strToTime:function(e){return new Date(e).getTime()},stringToHslColor:function(e,t,n){for(var i=0,o=0;o<e.length;o++)i=e.charCodeAt(o)+((i<<5)-i);return"hsl("+i%360+", "+t+"%, "+n+"%)"},pathToNormalTitle:function(e){var t=e.split("."),n=t.pop();return((t=t.join("."))+"").replace(/_|\./g," ")+' <span class="exe">.'+n+"</span>"}},_=h.protocol()+"api.themoviedb.org/3/",b=h.protocol()+"image.tmdb.org/t/p/w300/",y=new l,w="4ef0d7355d9ffb5151e987764708ce96";function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=S(e,"api_key="+w),e=S(e,"language=ru"),t.genres&&(e=S(e,"with_genres="+t.genres)),t.page&&(e=S(e,"page="+t.page)),t.query&&(e=S(e,"query="+t.query)),_+e}function S(e,t){return e+(/\?/.test(e)?"&":"?")+t}function x(e){this.data={},this.work=0,this.check=function(){this.work>=e&&this.onComplite(this.data)},this.append=function(e,t){this.work++,this.data[e]=t,this.check()},this.error=function(){this.work++,this.check()}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=k(e,t);y.silent(o,(function(t){t.url=e,n(t)}),i)}var T,M={main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=new x(8);i.onComplite=function(){var e=[];i.data.wath&&e.push(i.data.wath),i.data.trend_day&&e.push(i.data.trend_day),i.data.trend_week&&e.push(i.data.trend_week),i.data.upcoming&&e.push(i.data.upcoming),i.data.popular&&e.push(i.data.popular),i.data.popular_tv&&e.push(i.data.popular_tv),i.data.top&&e.push(i.data.top),i.data.top_tv&&e.push(i.data.top_tv),e.length?t(e):n()};var o=function(e,t,n){n.title=e,i.append(t,n)};C("movie/now_playing",e,(function(e){o("Сейчас смотрят","wath",e)}),i.error.bind(i)),C("trending/moviews/day",e,(function(e){o("Сегодня в тренде","trend_day",e)}),i.error.bind(i)),C("trending/moviews/week",e,(function(e){o("В тренде за неделю","trend_week",e)}),i.error.bind(i)),C("movie/upcoming",e,(function(e){o("Смотрите в кинозалах","upcoming",e)}),i.error.bind(i)),C("movie/popular",e,(function(e){o("Популярные фильмы","popular",e)}),i.error.bind(i)),C("tv/popular",e,(function(e){o("Популярные сериалы","popular_tv",e)}),i.error.bind(i)),C("movie/top_rated",e,(function(e){o("Топ фильмы","top",e)}),i.error.bind(i)),C("tv/top_rated",e,(function(e){o("Топ сериалы","top_tv",e)}),i.error.bind(i))},img:function(e,t){var n=b;return t&&(n=n.replace(/w300/g,t)),e?n+e:""},full:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new x(5);n.onComplite=t,C(e.method+"/"+e.id,e,(function(e){n.append("movie",e)}),n.error.bind(n)),C(e.method+"/"+e.id+"/credits",e,(function(e){n.append("actors",e)}),n.error.bind(n)),C(e.method+"/"+e.id+"/recommendations",e,(function(e){n.append("recomend",e)}),n.error.bind(n)),C(e.method+"/"+e.id+"/similar",e,(function(e){n.append("simular",e)}),n.error.bind(n)),C(e.method+"/"+e.id+"/videos",e,(function(e){n.append("videos",e)}),n.error.bind(n))},categoryFull:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=k(e.url,e);y.silent(i,t,n)},genres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=k("genre/movie/list",e);y.silent(i,t,n)},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=new x(5);i.onComplite=function(){var e=[];i.data.wath&&i.data.wath.results.length&&e.push(i.data.wath),i.data.popular&&i.data.popular.results.length&&e.push(i.data.popular),i.data.tv_today&&i.data.tv_today.results.length&&e.push(i.data.tv_today),i.data.tv_air&&i.data.tv_air.results.length&&e.push(i.data.tv_air),i.data.top&&i.data.top.results.length&&e.push(i.data.top),e.length?t(e):n()};var o=function(e,t,n){n.title=e,i.append(t,n)};C(e.url+"/now_playing",e,(function(e){o("Сейчас смотрят","wath",e)}),i.error.bind(i)),C(e.url+"/popular",e,(function(e){o("Популярное","popular",e)}),i.error.bind(i)),C(e.url+"/airing_today",e,(function(e){o("Сегодня в эфире","tv_today",e)}),i.error.bind(i)),C(e.url+"/on_the_air",e,(function(e){o("На этой неделе","tv_air",e)}),i.error.bind(i)),C(e.url+"/top_rated",e,(function(e){o("В топе","top",e)}),i.error.bind(i))},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new x(2);n.onComplite=t,C("search/movie",e,(function(e){e.title="Фильмы",n.append("movie",e)}),n.error.bind(n)),C("search/tv",e,(function(e){e.title="Сериалы",n.append("tv",e)}),n.error.bind(n))},clear:function(){y.clear()},company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=k("company/"+e.id,e);y.silent(i,t,n)},actor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=function(e){var t=e.cast.map((function(e){return e.year=parseInt((e.release_date||e.first_air_date||"0000").slice(0,4)),e}));return t.sort((function(e,t){return t.year-e.year})),{results:t.slice(0,40)}},i=new x(3);i.onComplite=function(){var e={};i.data.actor&&(e.actor=i.data.actor),i.data.movie&&i.data.movie.cast.length&&(e.movie=n(i.data.movie)),i.data.tv&&i.data.tv.cast.length&&(e.tv=n(i.data.tv)),t(e)},C("person/"+e.id,e,(function(e){i.append("actor",e)}),i.error.bind(i)),C("person/"+e.id+"/movie_credits",e,(function(e){i.append("movie",e)}),i.error.bind(i)),C("person/"+e.id+"/tv_credits",e,(function(e){i.append("tv",e)}),i.error.bind(i))},favorite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i={};i.results=p.get(e),i.total_pages=Math.ceil(i.results.length/20),i.page=Math.min(e.page,i.total_pages);var o=i.page-1;i.results=i.results.slice(20*o,20*o+20),i.results.length?t(i):n()}},N=r.get("selectbox"),z=new c({mask:!0,over:!0});function A(){$("body").toggleClass("selectbox--open",!1)}N.find(".selectbox__body").append(z.render()),$("body").append(N);var F={show:function(e){T=e,z.clear(),N.find(".selectbox__title").text(T.title),T.items.forEach((function(e){if(!e.hide){e.title=h.capitalizeFirstLetter(e.title||"");var t=r.get(e.template||"selectbox_item",e);if(e.subtitle||t.find(".selectbox-item__subtitle").remove(),!e.noenter){var n=function(){T.nohide||A(),T.onSelect&&T.onSelect(e)};t.on("hover:enter",(function(){T.onBeforeClose?T.onBeforeClose()&&n():n()})).on("hover:focus",(function(t){z.update($(t.target),!0),T.onFocus&&T.onFocus(e,t.target)}))}e.selected&&t.addClass("selected"),z.append(t)}})),$("body").toggleClass("selectbox--open",!0),N.find(".selectbox__body").addClass("layer--wheight").data("mheight",N.find(".selectbox__head")),Yt.add("select",{toggle:function(){var e=z.render().find(".selected");Yt.collectionSet(N),Yt.collectionFocus(!!e.length&&e[0],N)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){A(),T.onBack&&T.onBack()}}),Yt.toggle("select")},hide:A};function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.extend(e,{title:e.name,original_title:e.original_name,release_date:e.first_air_date}),e.release_date=(e.release_date||"0000").slice(0,4);var n=r.get("card",e),i=new Image;i.crossOrigin="Anonymous",t.card_small&&(n.addClass("card--small"),n.find(".card__title").remove(),n.find(".card__age").remove()),t.card_category&&(n.addClass("card--category"),n.find(".card__age").remove()),this.image=function(){i.onload=function(){n.find("img")[0].src=i.src,n.addClass("card--loaded")},i.onerror=function(e){n.find("img")[0].src="./img/img_broken.svg"}},this.addicon=function(e){n.find(".card__icons-inner").append('<div class="card__icon icon--'+e+'"></div>')},this.favorite=function(){var t=p.check(e);n.find(".card__icon").remove(),t.book&&this.addicon("book"),t.like&&this.addicon("like"),t.wath&&this.addicon("wath")},this.create=function(){var t=this;this.favorite(),n.on("hover:focus",(function(n){t.onFocus(n.target,e)})).on("hover:enter",(function(n){t.onEnter(n.target,e)})).on("hover:long",(function(n){var i=Yt.enabled().name,o=p.check(e);F.show({title:"Действие",items:[{title:o.book?"Убрать из закладок":"В закладки",subtitle:"Смотрите в меню (Закладки)",where:"book"},{title:o.like?"Убрать из понравившихся":"Нравится",subtitle:"Смотрите в меню (Нравится)",where:"like"},{title:o.wath?"Убрать из ожидаемых":"Смотреть позже",subtitle:"Смотрите в меню (Позже)",where:"wath"}],onBack:function(){Yt.toggle(i)},onSelect:function(n){p.toggle(n.where,e),t.favorite(),Yt.toggle(i)}})})),this.image()},this.visible=function(){this.visibled||(e.poster_path?i.src=M.img(e.poster_path):i.src="./img/img_broken.svg",this.visibled=!0)},this.destroy=function(){i.onerror=function(){},i.onload=function(){},i.src="",n.remove(),n=null,i=null},this.render=function(){return n}}function E(){var e;e={normal:1,small:.9,bigger:1.1}[ln.field("interface_size")],$("body").css({fontSize:Math.max(window.innerWidth/84.17*e,10.6)+"px"}),$(".layer--width").css("width",window.innerWidth),$(".layer--height").css("height",window.innerHeight);var t=$(".head")[0].getBoundingClientRect();$(".layer--wheight").each((function(){var e=$(this),n=window.innerHeight-t.height;e.data("mheight")&&(n-=e.data("mheight")[0].getBoundingClientRect().height),e.css("height",n)}))}function B(){$("body").toggleClass("no--animation",!ln.field("animation")),$("body").toggleClass("no--mask",!ln.field("mask"))}var R={update:E,init:function(){$(window).on("resize",E),B(),ln.listener.follow("change",(function(e){"interface_size"==e.name&&E(),"animation"!=e.name&&"mask"!=e.name||B()}))}},V=document.createElement("canvas"),O=V.getContext("2d");function P(e){for(var t=e.data,n=[],i=0,o=t.length;i<o;i+=4)n.push([t[i],t[i+1],t[i+2]]);return n}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba("+e.join(",")+","+t+")"}function I(e,t,n){var i,o,a,r,s,l,c,d,u,v,g,f;return i=e/255,o=t/255,a=n/255,u=Math.max(i,o,a),g=function(e){return(u-e)/6/v+.5},f=function(e){return Math.round(100*e)/100},0==(v=u-Math.min(i,o,a))?c=d=0:(d=v/u,r=g(i),s=g(o),l=g(a),i===u?c=l-s:o===u?c=1/3+r-l:a===u&&(c=2/3+s-r),c<0?c+=1:c>1&&(c-=1)),[Math.round(360*c),f(100*d),f(100*u)]}function j(e,t,n){t/=100,n/=100;var i=(1-Math.abs(2*n-1))*t,o=e/60,a=i*(1-Math.abs(o%2-1)),r=0,s=0,l=0;o>=0&&o<1?(r=i,s=a):o>=1&&o<2?(r=a,s=i):o>=2&&o<3?(s=i,l=a):o>=3&&o<4?(s=a,l=i):o>=4&&o<5?(r=a,l=i):(r=i,l=a);var c=n-i/2;return r+=c,s+=c,l+=c,r*=255,s*=255,l*=255,[Math.round(r),Math.round(s),Math.round(l)]}V.width=30,V.height=17;var G,U={get:function(e){var t=Math.max(V.width/e.width,V.height/e.height),n=e.width*t,i=e.height*t;return O.drawImage(e,-(n-V.width)/2,-(i-V.height)/2,n,i),P(O.getImageData(0,0,V.width,V.height))},extract:P,palette:function(e){for(var t={bright:[0,0,0],average:[127,127,127],dark:[255,255,255]},n=0,i=0,o=0,a=e.length,r=0,s=765,l=0;l<e.length;l++){var c=e[l],d=c[0]+c[1]+c[2];n+=c[0],i+=c[1],o+=c[2],d>r&&(r=d,t.bright=c),d<s&&(s=d,t.dark=c)}return t.average=[Math.round(n/a),Math.round(i/a),Math.round(o/a)],t},rgba:L,tone:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80,o=I(e[0],e[1],e[2]),a=j(o[0],Math.min(n,o[1]),i);return L(a,t)}},K=$('\n    <div class="background">\n        <canvas class="background__one"></canvas>\n        <canvas class="background__two"></canvas>\n    </div>\n'),H={one:{canvas:$(".background__one",K),ctx:$(".background__one",K)[0].getContext("2d")},two:{canvas:$(".background__two",K),ctx:$(".background__two",K)[0].getContext("2d")}},J="one",W="",Z={};function Y(){return K.find("canvas").removeClass("visible"),H[J="one"==J?"two":"one"]}function q(e,t){if(!ln.get("background","true"))return H.one.canvas.removeClass("visible"),void H.two.canvas.removeClass("visible");t.canvas[0].width=window.innerWidth,t.canvas[0].height=window.innerHeight;var n=e.palette,i=ln.get("background_type","complex");if("poster"!==i){var o=90*Math.PI/180,a=t.canvas[0].width*Math.cos(o),r=t.canvas[0].height*Math.sin(o);(d=t.ctx.createLinearGradient(0,0,a,r)).addColorStop(1,U.tone(n.average,.7,50,80)),d.addColorStop(0,U.rgba(n.dark,.2)),t.ctx.fillStyle=d,t.ctx.fillRect(0,0,t.canvas[0].width,t.canvas[0].height)}else{var s=Math.max(t.canvas[0].width/e.img.width,t.canvas[0].height/e.img.height);t.ctx.globalAlpha=e.img.width>1e3?.3:.6,t.ctx.filter=e.img.width>1e3?"":"blur(14px)";var l=e.img.width*s,c=e.img.height*s;t.ctx.drawImage(e.img,-(l-t.canvas[0].width)/2,-(c-t.canvas[0].height)/2,l,c),t.ctx.globalAlpha=.7;var d;o=90*Math.PI/180,a=t.canvas[0].width*Math.cos(o),r=t.canvas[0].height*Math.sin(o);(d=t.ctx.createLinearGradient(0,0,a,r)).addColorStop(0,"rgba(0,0,0,1)"),d.addColorStop(1,"rgba(0,0,0,0)"),t.ctx.fillStyle=d,t.ctx.fillRect(0,0,t.canvas[0].width,t.canvas[0].height)}if("complex"==i)for(var u=0;u<10;u++){var v=window.innerWidth*Math.random(),g=window.innerHeight*Math.random(),f=Math.max(window.innerHeight/8,window.innerHeight/5*Math.random()),p=t.ctx.createRadialGradient(v,g,f,v,g,2*f);p.addColorStop(0,U.tone(u<5?n.average:n.bright,.1)),p.addColorStop(.5,U.tone(u<5?n.average:n.bright,.05)),p.addColorStop(1,U.tone(u<5?n.average:n.bright,0)),t.ctx.beginPath(),t.ctx.fillStyle=p,t.ctx.arc(v,g,2*f,0,2*Math.PI),t.ctx.fill()}t.canvas.addClass("visible")}function X(){Z[W]&&q(Z[W],H[J])}function Q(){if(Z[W])q(Z[W],Y());else if(W){var e;!function(){var e=o.getKeys(Z);if(e.length>30){var t=e.slice(0,1);delete Z[t]}}();var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){try{e=U.get(t)}catch(t){e=[[200,200,200],[100,100,100],[10,10,10]]}Z[W]={img:t,palette:U.palette(e)},q(Z[W],Y())},t.src=W}}var ee,te,ne,ie={render:function(){return K},change:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(e=e.replace("https://","http://"))!=W&&(e&&(W=e),clearTimeout(G),G=setTimeout((function(){Q()}),2e3))},update:X,init:function(){ln.listener.follow("change",(function(e){"background"!=e.name&&"background_type"!=e.name||X()})),$(window).on("resize",X)},immediately:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e&&(W=e),clearTimeout(G),Q()}};function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.get("more");e.card_small&&t.addClass("card-more--small"),this.create=function(){var e=this;t.on("hover:focus",(function(t){e.onFocus(t.target)})).on("hover:enter",(function(t){e.onEnter(t.target)}))},this.render=function(){return t},this.destroy=function(){t.remove(),t=null}}function ae(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.get("items_line",{title:e.title}),s=a.find(".items-line__body"),l=new c({horizontal:!0}),d=[],u=0;this.create=function(){l.render().find(".scroll__body").addClass("items-cards"),a.find(".items-line__title").text(e.title),this.bind(),s.append(l.render())},this.bind=function(){e.results.slice(0,8).forEach(this.append.bind(this)),e.results.length>=20&&!i.nomore&&this.more(),this.visible(),R.update()},this.append=function(o){var a=this;if(!o.ready){o.ready=!0;var r=new D(o,i);r.create(),r.onFocus=function(o,s){n=o,u=d.indexOf(r),e.results.slice(0,u+5).forEach(a.append.bind(a)),t&&(t.render().detach(),l.append(t.render())),l.update(d[u].render(),!i.align_left),a.visible(),e.noimage||ie.change(h.cardImgBackground(s)),a.onFocus&&a.onFocus(s)},r.onEnter=function(e,t){a.onEnter&&a.onEnter(),It.push({url:"",component:"full",id:o.id,method:t.name?"tv":"movie",card:o})},l.append(r.render()),d.push(r)}},this.more=function(){var o=this;(t=new oe(i)).create(),t.onFocus=function(e){n=e,l.update(t.render(),!i.align_left)},t.onEnter=function(){o.onEnter&&o.onEnter(),o.onMore?o.onMore():It.push({url:e.url,title:"Категория",component:"category_full",page:2,genres:i.genres})},l.append(t.render())},this.visible=function(){d.slice(u,u+8).forEach((function(e){e.visible()}))},this.toggle=function(){var e=this;Yt.add("items_line",{toggle:function(){Yt.collectionSet(l.render()),Yt.collectionFocus(!!d.length&&n,l.render()),e.visible()},right:function(){Navigator.move("right"),Yt.enable("items_line")},left:function(){Navigator.canmove("left")?Navigator.move("left"):e.onLeft?e.onLeft():Yt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Yt.toggle("items_line")},this.render=function(){return a},this.destroy=function(){o.destroy(d),l.destroy(),a.remove(),t&&t.destroy(),d=null,t=null}}function re(){var e;this.create=function(){e=r.get("info")},this.update=function(t){e.find(".info__title").text(t.title),e.find(".info__title-original").text(t.original_title),e.find(".info__create").text((t.release_date||t.first_air_date).slice(0,4)),e.find(".info__rate span").text(t.vote_average),e.find(".info__icon").removeClass("active");var n=p.check(t);$(".icon--book",e).toggleClass("active",n.book),$(".icon--like",e).toggleClass("active",n.like),$(".icon--wath",e).toggleClass("active",n.wath)},this.render=function(){return e},this.destroy=function(){e.remove(),e=null}}function se(){var e=r.get("empty");this.start=function(){Yt.add("content",{toggle:function(){Yt.collectionSet(e),Yt.collectionFocus(!1,e)},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Yt.toggle("head")},down:function(){Navigator.move("down")},right:function(){Navigator.move("right")},back:function(){It.backward()}}),Yt.toggle("content")},this.render=function(t){return t&&e.append(t),e}}function le(e){te=$('<div class="youtube-player"><div id="youtube-player"></div><div id="youtube-player__progress" class="youtube-player__progress"></div></div>'),$("body").append(te),ee=new YT.Player("youtube-player",{height:window.innerHeight,width:window.innerWidth,playerVars:{controls:0,showinfo:0,autohide:1,modestbranding:1,autoplay:1},videoId:e,events:{onReady:function(e){e.target.playVideo(),ce()},onStateChange:function(e){0==e.data&&Yt.toggle("content")}}})}function ce(){ne=setTimeout((function(){var e=ee.getCurrentTime()/ee.getDuration()*100;$("#youtube-player__progress").css("width",e+"%"),ce()}),400)}var de,ue,ve,ge,fe={play:function(e){le(e),Yt.add("youtube",{invisible:!0,toggle:function(){},right:function(){ee.seekTo(ee.getCurrentTime()+10,!0)},left:function(){ee.seekTo(ee.getCurrentTime()-10,!0)},enter:function(){},gone:function(){clearTimeout(ne),ee.destroy(),te.remove(),te=null},back:function(){Yt.toggle("content")}}),Yt.toggle("youtube")}};function pe(e){e.find(".selector").on("hover:focus",(function(e){ge=e.target,ve.update($(e.target))})).on("hover:enter",(function(e){ue.onSelect&&ue.onSelect($(e.target))}))}function me(){Yt.add("modal",{invisible:!0,toggle:function(){Yt.collectionSet(ve.render()),Yt.collectionFocus(ge,ve.render())},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){ue.onBack&&ue.onBack()}}),Yt.toggle("modal")}function he(e){de.find(".modal__title").text(e),de.toggleClass("modal--empty-title",!e)}var _e={open:function(e){ue=e,de=r.get("modal",{title:e.title}),he(e.title),de.toggleClass("modal--medium","medium"==e.size),de.toggleClass("modal--large","large"==e.size),ve=new c({over:!0,mask:e.mask}),de.find(".modal__body").append(ve.render()),pe(e.html),ve.append(e.html),$("body").append(de),me()},close:function(){ge=!1,ve.destroy(),de.remove()},update:function(e){ge=!1,ve.clear(),ve.append(e),pe(e),me()},title:he};var be={start:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(){var e=ln.get("parser_use");t.find(".view--torrent").toggleClass("selector",e).toggleClass("hide",!e)};o.extend(e.movie,{title:e.movie.name,original_title:e.movie.original_name,runtime:0,img:e.movie.poster_path?M.img(e.movie.poster_path):"img/img_broken.svg"}),this.create=function(){var n=(e.movie.genres||["---"]).slice(0,3).map((function(e){return h.capitalizeFirstLetter(e.name)})).join(", ");t=r.get("full_start",{title:e.movie.title,original_title:e.movie.original_title,descr:h.substr(e.movie.overview,420),img:e.movie.img,time:h.secondsToTime(60*e.movie.runtime,!0),genres:n,r_themovie:e.movie.vote_average,seasons:e.movie.number_of_seasons,episodes:e.movie.number_of_episodes}),e.movie.number_of_seasons&&t.find(".is--serial").removeClass("hide"),t.find(".view--torrent").on("hover:enter",(function(){var t=e.movie.original_title;/\w{3}/.test(t)||(t=e.movie.title),It.push({url:"",title:"Торренты",component:"torrents",search:t,movie:e.movie,page:1})})),e.videos&&e.videos.results.length?t.find(".view--trailer").on("hover:enter",(function(){var t=[];e.videos.results.forEach((function(e){t.push({title:e.name,subtitle:e.official?"Официальный":"Неофициальный",id:e.key})})),F.show({title:"Трейлеры",items:t,onSelect:function(e){fe.play(e.id)},onBack:function(){Yt.toggle("full_start")}})})):t.find(".view--trailer").remove(),ie.immediately(h.cardImgBackground(e.movie)),ln.listener.follow("change",a),a(),this.menu(),this.favorite()},this.menu=function(){var e=this;t.find(".open--menu").on("hover:enter",(function(){var t=Yt.enabled().name,n=p.check(i.object.card),o=[];o.push({title:n.book?"Убрать из закладок":"В закладки",subtitle:"Смотрите в меню (Закладки)",where:"book"}),o.push({title:n.like?"Убрать из понравившихся":"Нравится",subtitle:"Смотрите в меню (Нравится)",where:"like"}),o.push({title:n.wath?"Убрать из ожидаемых":"Смотреть позже",subtitle:"Смотрите в меню (Позже)",where:"wath"}),F.show({title:"Действие",items:o,onBack:function(){Yt.toggle(t)},onSelect:function(n){p.toggle(n.where,i.object.card),e.favorite(),Yt.toggle(t)}})}))},this.favorite=function(){var e=p.check(i.object.card);$(".info__icon",t).removeClass("active"),$(".icon--book",t).toggleClass("active",e.book),$(".icon--like",t).toggleClass("active",e.like),$(".icon--wath",t).toggleClass("active",e.wath)},this.toggle=function(){var e=this;Yt.add("full_start",{toggle:function(){Yt.collectionSet(e.render()),Yt.collectionFocus(n,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Yt.toggle("full_start")},this.render=function(){return t},this.destroy=function(){n=null,t.remove(),ln.listener.remove("change",a)}},descr:function(e){var t,n,i;this.create=function(){t=r.get("items_line",{title:"Подробно"});var a=e.movie.genres.map((function(e){return'<div class="full-descr__tag selector" data-genre="'+e.id+'">'+e.name+"</div>"})).join(""),s=e.movie.production_companies.map((function(e){return'<div class="full-descr__tag selector" data-company="'+e.id+'">'+e.name+"</div>"})).join(""),l=e.movie.production_countries.map((function(e){return e.name})).join(", ");(n=r.get("full_descr",{text:e.movie.overview,genres:a,companies:s,relise:e.movie.release_date||e.movie.first_air_date,budget:"$ "+h.numberWithSpaces(e.movie.budget||0),countries:l})).find(".selector").on("hover:enter",(function(e){var t=$(e.target);t.data("genre")&&It.push({url:"movie",component:"category",genres:t.data("genre")}),t.data("company")&&(M.clear(),_e.open({title:"Компания",html:r.get("modal_loading"),size:"medium",onBack:function(){_e.close(),Yt.toggle("full_descr")}}),M.company({id:t.data("company")},(function(e){"modal"==Yt.enabled().name&&(o.empty(e,{homepage:"---",origin_country:"---",headquarters:"---"}),_e.update(r.get("company",e)))}),(function(){})))})).on("hover:focus",(function(e){i=e.target})),t.find(".items-line__body").append(n)},this.toggle=function(){var e=this;Yt.add("full_descr",{toggle:function(){Yt.collectionSet(e.render()),Yt.collectionFocus(i,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},down:function(){Navigator.canmove("down")?Navigator.move("down"):e.onDown()},up:function(){Navigator.canmove("up")?Navigator.move("up"):e.onUp()},gone:function(){},back:this.onBack}),Yt.toggle("full_descr")},this.render=function(){return t},this.destroy=function(){n.remove(),t.remove(),t=null,n=null}},actors:function(e){var t,n,i;this.create=function(){t=r.get("items_line",{title:"Актеры"}),(n=new c({horizontal:!0})).render().find(".scroll__body").addClass("full-actors"),t.find(".items-line__body").append(n.render()),e.actors.cast.forEach((function(e){var t=r.get("full_actor",{firstname:e.name,lastname:e.character,img:e.profile_path?M.img(e.profile_path):"./img/actor.svg"});t.on("hover:focus",(function(e){i=e.target,n.update($(e.target),!0)})).on("hover:enter",(function(){It.push({url:"",title:"Актер",component:"actor",id:e.id})})),n.append(t)}))},this.toggle=function(){var e=this;Yt.add("full_descr",{toggle:function(){Yt.collectionSet(e.render()),Yt.collectionFocus(i,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Yt.toggle("full_descr")},this.render=function(){return t},this.destroy=function(){n.destroy(),t.remove(),t=null}},recomend:ae,simular:ae};var ye={start:function(e){var t,n;this.create=function(){t=r.get("actor_start",{name:e.name,birthday:e.birthday,descr:h.substr(e.biography,1020),img:M.img(e.profile_path),place:e.place_of_birth})},this.toggle=function(){var e=this;Yt.add("full_start",{toggle:function(){Yt.collectionSet(e.render()),Yt.collectionFocus(n,e.render())},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},down:this.onDown,up:this.onUp,gone:function(){},back:this.onBack}),Yt.toggle("full_start")},this.render=function(){return t},this.destroy=function(){n=null,t.remove()}},movie:ae,tv:ae};function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.get("files",e.movie);this.render=function(){return t},this.append=function(e){t.find(".files__body").append(e)},this.destroy=function(){t.remove(),t=null},this.clear=function(){t.find(".files__body").empty()}}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.get("search_box"),n="";function i(){l.destroy(),t.remove(),t=null}function o(){i(),e.onBack()}function a(){i(),e.onSearch(n)}function s(e){(n=e.trim())?t.find(".search-box__input").text(n):t.find(".search-box__input").text("Введите текст...")}$("body").append(t);var l=new qt({layout:{en:["1 2 3 4 5 6 7 8 9 0 {bksp}","q w e r t y u i o p","a s d f g h j k l","z x c v b n m","{RU} {space} {enter}"],default:["1 2 3 4 5 6 7 8 9 0 {bksp}","й ц у к е н г ш щ з х ъ","ф ы в а п р о л д ж э","я ч с м и т ь б ю","{EN} {space} {enter}"]}});l.create(),l.listener.follow("change",(function(e){s(e.value)})),l.listener.follow("back",o),l.listener.follow("enter",a),l.value(e.input),s(e.input),l.toggle()}function Se(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.get("filter"),i=$('<div class="simple-button selector" style="margin: 2em auto 0 auto">Уточнить поиск</div>'),o={sort:[],filter:[]};i.on("hover:enter",(function(){new ke({input:t.search,onSearch:e.onSearch,onBack:e.onBack})})),n.find(".filter--search").on("hover:enter",(function(){new ke({input:t.search,onSearch:e.onSearch,onBack:e.onBack})})),n.find(".filter--sort").on("hover:enter",(function(){e.show("Сортировать","sort")})),n.find(".filter--filter").on("hover:enter",(function(){e.show("Фильтр","filter")})),this.show=function(e,t){var n=this,i=o[t];F.show({title:e,items:i,onBack:this.onBack,onSelect:function(o){o.items?F.show({title:o.title,items:o.items,onBack:function(){n.show(e,t)},onSelect:function(e){n.selected(o.items,e),n.onSelect(t,o,e)}}):(n.selected(i,o),n.onSelect(t,o))}})},this.selected=function(e,t){e.forEach((function(e){e.selected=!1})),t.selected=!0},this.render=function(){return n},this.append=function(e){html.find(".files__body").append(e)},this.empty=function(){return i},this.toggle=function(){n.find(".filter--sort").toggleClass("selector",!!o.sort.length).toggleClass("hide",!o.sort.length),n.find(".filter--filter").toggleClass("selector",!!o.filter.length).toggleClass("hide",!o.filter.length)},this.set=function(e,t){o[e]=t,this.toggle()},this.get=function(e){return o[e]},this.sort=function(e,t){e.sort((function(e,n){return e[t]<n[t]?1:e[t]>n[t]?-1:0}))},this.destroy=function(){i.remove(),n.remove(),i=null,n=null,o=null}}var xe,Ce,Te=t(),Me=r.get("player_video"),Ne=Me.find(".player-video__display"),ze=Me.find(".player-video__paused"),Ae={},Fe=0;function De(){var e=$('<video class="player-video__video" poster="./img/video_poster.png" crossorigin="anonymous"></video>');Ne.append(e),(xe=e[0]).addEventListener("waiting",(function(){Ee(!0)})),xe.addEventListener("playing",(function(){Ee(!1)})),xe.addEventListener("ended",(function(){Te.send("ended",{})})),xe.addEventListener("error",(function(e){var t=xe.error||{},n=(t.message||"").toUpperCase();-1==n.indexOf("EMPTY SRC")&&(3==t.code?Te.send("error",{error:"Не удалось декодировать видео"}):4==t.code?Te.send("error",{error:"Видео не найдено или повреждено"}):Te.send("error",{error:"code ["+t.code+"] details ["+n+"]"}))})),xe.addEventListener("progress",(function(e){var t=xe.duration;if(t>0)for(var n=0;n<xe.buffered.length;n++)if(xe.buffered.start(xe.buffered.length-1-n)<xe.currentTime){var i=Math.max(0,Math.min(100,xe.buffered.end(xe.buffered.length-1-n)/t*100))+"%";Te.send("progress",{down:i});break}})),xe.addEventListener("canplay",(function(){Te.send("canplay",{})})),xe.addEventListener("timeupdate",(function(){Te.send("timeupdate",{duration:xe.duration,current:xe.currentTime})})),xe.volume=1,xe.muted=!1}function Ee(e){Ce=e,Me.toggleClass("video--load",e)}function Be(){var e;try{e=xe.play()}catch(e){}void 0!==e&&e.then((function(){console.log("Player","start plaining")})).catch((function(e){console.log("Player","play promise error")})),ze.addClass("hide"),Te.send("play",{})}function Re(){var e;try{e=xe.pause()}catch(e){}void 0!==e&&e.then((function(){console.log("Player","pause")})).catch((function(){console.log("Player","pause promise error")})),ze.removeClass("hide"),Te.send("pause",{})}function Ve(e,t){xe.duration&&(Fe=Math.max(0,Math.min(e,xe.duration)),Re(),0==Fe?xe.currentTime=0:Fe==xe.duration&&(xe.currentTime=xe.duration),Ae.rewind=Date.now(),Te.send("timeupdate",{duration:xe.duration,current:Fe}),Te.send("rewind",{}),function(e){clearTimeout(Ae.rewind_call),Ae.rewind_call=setTimeout((function(){xe.currentTime=Fe,Fe=0,Be()}),e?0:500)}(t))}var Oe={listener:Te,url:function(e){De(),xe.src=e,xe.load(),Be()},render:function(){return Me},destroy:function(){xe.src="",xe.load(),Ne.empty()},playpause:function(){Ce||Fe||(xe.paused?(Be(),Te.send("play",{})):(Re(),Te.send("pause",{})))},rewind:function(e,t){if(xe.duration){var n=Date.now(),i=xe.duration/1800,o=n-(Ae.rewind||0)>50?20:60;0==Fe&&(Fe=xe.currentTime),e?Fe+=Math.min(o,t||30*i):Fe-=Math.min(o,t||30*i),Ve(Fe)}},play:Be,pause:Re,size:function(e){Me.attr("data-size",e)}};var Pe=r.get("player_info");var Le,$e={listener:t(),render:function(){return Pe},set:function(e){Pe.find(".player-info__name").html(h.pathToNormalTitle(e.title))},toggle:function(e){Pe.toggleClass("info--visible",e)},destroy:function(){}},Ie=r.get("player_panel"),je=t(),Ge={},Ue={},Ke={peding:$(".player-panel__peding",Ie),position:$(".player-panel__position",Ie),time:$(".player-panel__time",Ie),timenow:$(".player-panel__timenow",Ie),timeend:$(".player-panel__timeend",Ie),title:$(".player-panel__filename",Ie)},He=new function(e){this.state=e.state,this.start=function(){this.dispath(this.state)},this.dispath=function(t){var n=e.transitions[t];n?n.call(this):console.log("invalid action")}}({state:"start",transitions:{start:function(){clearTimeout(Ue.hide),clearTimeout(Ue.rewind),this.dispath("canplay")},canplay:function(){Ge.canplay?this.dispath("visible"):Je(!0)},visible:function(){Ge.visible?Je(!0):this.dispath("rewind")},rewind:function(){var e=this;clearTimeout(Ue.rewind),Ge.rewind?(Je(!0),Ue.rewind=setTimeout((function(){Ge.rewind=!1,e.dispath("hide")}),1e3)):this.dispath("hide")},hide:function(){clearTimeout(Ue.hide),Ue.hide=setTimeout((function(){Je(!1)}),1e3)}}});function Je(e){$e.toggle(e),Ie.toggleClass("panel--visible",e)}function We(){Ge.visible=!1,Je(!1)}Ie.find(".selector").on("hover:focus",(function(e){Le=e.target})),Ie.find(".player-panel__playpause").on("hover:enter",(function(e){je.send("playpause",{})})),Ie.find(".player-panel__next").on("hover:enter",(function(e){je.send("next",{})})),Ie.find(".player-panel__prev").on("hover:enter",(function(e){je.send("prev",{})})),Ie.find(".player-panel__rprev").on("hover:enter",(function(e){je.send("rprev",{})})),Ie.find(".player-panel__rnext").on("hover:enter",(function(e){je.send("rnext",{})})),Ie.find(".player-panel__playlist").on("hover:enter",(function(e){je.send("playlist",{})})),Ie.find(".player-panel__size").on("hover:enter",(function(e){var t=ln.get("player_size","default"),n=[{title:"По умолчанию",subtitle:"Размер видео по умолчанию",value:"default",selected:"default"==t},{title:"Расширить",subtitle:"Расширяет видео на весь экран",value:"cover",selected:"cover"==t}];F.show({title:"Размер видео",items:n,onSelect:function(e){je.send("size",{size:e.value}),Yt.toggle("player_panel")},onBack:function(){Yt.toggle("player_panel")}})}));var Ze={listener:je,render:function(){return Ie},toggle:function(){var e=this;Yt.add("player_panel",{invisible:!0,toggle:function(){Yt.collectionSet(e.render()),Yt.collectionFocus(Le||$(".player-panel__playpause",Ie)[0],e.render()),Ge.visible=!0,He.start()},up:function(){Yt.toggle("player")},down:function(){Yt.toggle("player")},right:function(){Navigator.move("right")},left:function(){Navigator.move("left")},gone:function(){Ie.find(".selector").removeClass("focus"),We()},back:function(){Yt.toggle("player")}}),Yt.toggle("player_panel")},show:function(){He.start()},destroy:function(){Le=!1,Ge={},Ke.peding.css({width:0}),Ke.position.css({width:0}),Ke.time.text("00:00"),Ke.timenow.text("00:00"),Ke.timeend.text("00:00"),Ie.toggleClass("panel--paused",!1)},hide:We,canplay:function(){Ge.canplay=!0,He.start()},update:function(e,t){"position"==e&&(Ke.position.css({width:t}),Ke.time.css({left:t})),"peding"==e&&Ke.peding.css({width:t}),"time"==e&&Ke.time.text(t),"timeend"==e&&Ke.timeend.text(t),"timenow"==e&&Ke.timenow.text(t),"play"==e&&Ie.toggleClass("panel--paused",!1),"pause"==e&&Ie.toggleClass("panel--paused",!0)},title:function(e){Ke.title.text(e)},rewind:function(){Ge.rewind=!0,He.start()}},Ye=t(),qe="",Xe=[],Qe=0;function et(){Xe.forEach((function(e){e.selected=e.url==qe,e.selected&&(Qe=Xe.indexOf(e))}))}var tt,nt={listener:Ye,show:function(){et();var e=Yt.enabled();F.show({title:"Плейлист",items:Xe,onSelect:function(t){Yt.toggle(e.name),Ye.send("select",{item:t})},onBack:function(){Yt.toggle(e.name)}})},url:function(e){qe=e},set:function(e){Xe=e},prev:function(){et(),Qe>1&&Ye.send("select",{item:Xe[Qe-1]})},next:function(){et(),Qe<Xe.length-1&&Ye.send("select",{item:Xe[Qe+1]})}},it=r.get("player");function ot(){Oe.destroy(),Ze.destroy(),it.detach()}function at(e){nt.url(e.url),Oe.url(e.url),Oe.size(ln.get("player_size","default")),$e.set(e),$("body").append(it),Yt.add("player",{invisible:!0,toggle:function(){Ze.hide()},up:function(){Ze.toggle()},down:function(){Ze.toggle()},right:function(){Oe.rewind(!0)},left:function(){Oe.rewind(!1)},gone:function(){},enter:function(){Oe.playpause()},back:function(){ot(),tt?tt():Yt.toggle("content"),tt=!1}}),Yt.toggle("player"),Ze.show(!0)}it.append(Oe.render()),it.append(Ze.render()),it.append($e.render()),Oe.listener.follow("timeupdate",(function(e){Ze.update("time",h.secondsToTime(0|e.current,!0)),Ze.update("timenow",h.secondsToTime(e.current||0)),Ze.update("timeend",h.secondsToTime(e.duration||0)),Ze.update("position",e.current/e.duration*100+"%")})),Oe.listener.follow("progress",(function(e){Ze.update("peding",e.down)})),Oe.listener.follow("canplay",(function(e){Ze.canplay()})),Oe.listener.follow("play",(function(e){Ze.update("play")})),Oe.listener.follow("pause",(function(e){Ze.update("pause")})),Oe.listener.follow("rewind",(function(e){Ze.rewind()})),Oe.listener.follow("ended",(function(e){nt.next()})),Ze.listener.follow("playpause",(function(e){Oe.playpause()})),Ze.listener.follow("playlist",(function(e){nt.show()})),Ze.listener.follow("size",(function(e){Oe.size(e.size),ln.set("player_size",e.size)})),Ze.listener.follow("prev",(function(e){nt.prev()})),Ze.listener.follow("next",(function(e){nt.next()})),Ze.listener.follow("rprev",(function(e){Oe.rewind(!1)})),Ze.listener.follow("rnext",(function(e){Oe.rewind(!0)})),nt.listener.follow("select",(function(e){ot(),at(e.item)}));var rt={play:at,playlist:function(e){nt.set(e)},render:function(){return it},callback:function(e){tt=e}},st=new l,lt={},ct={},dt=["asf","wmv","divx","avi","mp4","m4v","mov","3gp","3g2","mkv","trp","tp","mts","mpg","mpeg","dat","vob","rm","rmvb","m2ts","bdmv","ts"];var ut={start:function(e){lt.object=e,ln.get("torrserver_url")?(lt.url=h.checkHttp(ln.get("torrserver_url")),_e.open({title:"",html:r.get("modal_loading"),size:"large",mask:!0,onBack:function(){_e.close(),st.clear(),clearInterval(ct.files),Yt.toggle("content")}}),function(){st.timeout(3e3);var e=ln.get("torrserver_url");st.silent(lt.url+"/settings",(function(t){if(!t.CacheSize){var n=r.get("torrent_nocheck",{title:"Ошибка",ip:e,text:"Не удалось проверить на наличие TorrServer",echo:h.shortText(JSON.stringify(t),100)});_e.update(n),st.clear()}}),(function(t,n){var i=r.get("torrent_noconnect",{title:"Ошибка",text:"Не удалось подключиться к TorrServer",ip:e,echo:st.errorDecode(t,n)});e.indexOf("127.")>=0||-1==e.indexOf(":8090")||i.find(".nocorect").remove(),_e.update(i),st.clear()}),JSON.stringify({action:"get"}))}(),function(){var e={action:"add",link:lt.object.MagnetUri||lt.object.Link,title:lt.object.title,poster:lt.object.poster,save_to_db:ln.get("torrserver_savedb","false")};st.timeout(2e4),st.silent(lt.url+"/torrents",(function(e){lt.hash=e.hash,function(){var e=JSON.stringify({action:"get",hash:lt.hash}),t=0;ct.files=setInterval((function(){t++,st.clear(),st.timeout(2e3),st.silent(lt.url+"/torrents",(function(e){e.file_stats&&(clearInterval(ct.files),function(e){var t=$('<div class="torrent-files"></div>'),n=e.filter((function(e){var t=e.path.split(".").pop().toLowerCase();return dt.indexOf(t)>=0})),i=[];n.forEach((function(e){o.extend(e,{title:h.pathToNormalTitle(e.path),size:h.bytesToSize(e.length),url:lt.url+"/stream?link="+lt.hash+"&index="+e.id+"&play"}),i.push(e);var n=r.get("torrent_file",e);n.on("hover:enter",(function(){rt.play({title:e.title,url:e.url}),rt.callback((function(){Yt.toggle("modal")})),rt.playlist(i)})),t.append(n)})),0==n.length?t=r.get("error",{title:"Пусто",text:"Не удалось извлечь подходящие файлы"}):_e.title("Файлы");_e.update(t)}(e.file_stats))}),!1,e),t>=45&&(_e.update(r.get("error",{title:"Ошибка",text:"Время ожидания истекло"})),st.clear())}),2e3)}()}),(function(){var t="jackett"==ln.field("parser_torrent_type"),n=r.get("torrent_nohash",{title:"Ошибка",text:"Не удалось получить HASH",url:e.link});t?n.find(".is--torlook").remove():n.find(".is--jackett").remove(),_e.update(n),st.clear()}),JSON.stringify(e))}()):_e.open({title:"Необходим TorrServer",html:$('<div class="about"><div>Для просмотра торрента онлайн, необходимо установить TorrServer. Подробнее что такое TorrServer и как установить, вы можете найти на сайте https://github.com/YouROK/TorrServer</div></div>'),onBack:function(){_e.close(),Yt.toggle("content")}})}};var vt,gt={main:function(e){var t,n,i=new l,a=new c({mask:!0,over:!0}),r=[],s=$("<div></div>"),d=0;this.create=function(){var t=this;return this.activity.loader(!0),M.main(e,this.build.bind(this),(function(){var e=new se;s.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.build=function(e){n=e,(t=new re).create(),a.render().addClass("layer--wheight").data("mheight",t.render()),s.append(t.render()),s.append(a.render()),e.slice(0,2).forEach(this.append.bind(this)),this.activity.loader(!1),this.activity.toggle()},this.append=function(n){if(!n.ready){n.ready=!0;var i=new ae(n,{url:n.url,card_small:!0,genres:e.genres});i.create(),i.onDown=this.down.bind(this),i.onUp=this.up,i.onFocus=t.update,i.onBack=this.back,a.append(i.render()),r.push(i)}},this.back=function(){It.backward()},this.down=function(){d++,d=Math.min(d,r.length-1),n.slice(0,d+2).forEach(this.append.bind(this)),r[d].toggle(),a.update(r[d].render())},this.up=function(){--d<0?(d=0,Yt.toggle("head")):r[d].toggle(),a.update(r[d].render())},this.start=function(){Yt.add("content",{toggle:function(){r.length&&r[d].toggle()},back:this.back}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return s},this.destroy=function(){i.clear(),o.destroy(r),a.destroy(),t&&t.destroy(),s.remove(),r=null,i=null,n=null}},full:function(e){var t=new l,n=new c({mask:!0}),i=[],a=0;n.render().addClass("layer--wheight"),this.create=function(){var t=this;return this.activity.loader(!0),M.full(e,(function(e){t.activity.loader(!1),e.movie&&(t.build("start",e),t.build("descr",e),e.actors&&e.actors.cast&&e.actors.cast.length&&t.build("actors",e),e.recomend&&e.recomend.results.length&&(e.recomend.title="Рекомендации",e.recomend.noimage=!0,t.build("recomend",e.recomend)),e.simular&&e.simular.results.length&&(e.simular.title="Похожие",e.simular.noimage=!0,t.build("simular",e.simular)),ie.change(h.cardImgBackground(e.movie)),t.activity.toggle())}),(function(){})),this.render()},this.build=function(t,o){var a=new be[t](o,{object:e});a.onDown=this.down,a.onUp=this.up,a.onBack=this.back,a.create(),i.push(a),n.append(a.render())},this.down=function(){a++,a=Math.min(a,i.length-1),i[a].toggle(),n.update(i[a].render())},this.up=function(){--a<0?(a=0,Yt.toggle("head")):i[a].toggle(),n.update(i[a].render())},this.back=function(){It.backward()},this.start=function(){Yt.add("content",{toggle:function(){i.length&&i[a].toggle()}}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return n.render()},this.destroy=function(){t.clear(),o.destroy(i),n.destroy(),i=null,t=null}},category:function(e){var t,n,i=new l,a=new c({mask:!0,over:!0}),r=[],s=$("<div></div>"),d=0;this.create=function(){var t=this;return this.activity.loader(!0),M.category(e,this.build.bind(this),(function(){var e=new se;s.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.build=function(e){n=e,(t=new re).create(),a.render().addClass("layer--wheight").data("mheight",t.render()),s.append(t.render()),s.append(a.render()),e.slice(0,2).forEach(this.append.bind(this)),this.activity.loader(!1),this.activity.toggle()},this.append=function(n){if(!n.ready){n.ready=!0;var i=new ae(n,{url:n.url,card_small:!0,genres:e.genres});i.create(),i.onDown=this.down.bind(this),i.onUp=this.up,i.onFocus=t.update,i.onBack=this.back,a.append(i.render()),r.push(i)}},this.back=function(){It.backward()},this.down=function(){d++,d=Math.min(d,r.length-1),n.slice(0,d+2).forEach(this.append.bind(this)),r[d].toggle(),a.update(r[d].render())},this.up=function(){--d<0?(d=0,Yt.toggle("head")):r[d].toggle(),a.update(r[d].render())},this.start=function(){Yt.add("content",{toggle:function(){r.length&&r[d].toggle()},back:this.back}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return s},this.destroy=function(){i.clear(),o.destroy(r),a.destroy(),t&&t.destroy(),s.remove(),s=null,i=null,n=null}},category_full:function(e){var t,n,i,a=new l,r=new c({mask:!0,over:!0}),s=[],d=$("<div></div>"),u=$('<div class="category-full"></div>'),v=0;this.create=function(){var t=this;return this.activity.loader(!0),M.categoryFull(e,this.build.bind(this),(function(){var e=new se;d.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.next=function(){var t=this;i||e.page<15&&e.page<v&&(i=!0,e.page++,M.categoryFull(e,(function(e){t.append(e),i=!1,Yt.enable("content")}),(function(){})))},this.append=function(e){var i=this;e.results.forEach((function(e){var o=new D(e,{card_category:!0});o.create(),o.onFocus=function(e,a){n=e,r.update(o.render(),!0),ie.change(M.img(a.poster_path)),t.update(a);var l=Math.ceil(s.length/7)-1;Math.ceil(s.indexOf(o)/7)>=l&&i.next()},o.onEnter=function(t,n){It.push({url:"",component:"full",id:e.id,method:n.name?"tv":"movie",card:e})},o.visible(),u.append(o.render()),s.push(o)}))},this.build=function(e){v=e.total_pages,(t=new re).create(),r.render().addClass("layer--wheight").data("mheight",t.render()),d.append(t.render()),d.append(r.render()),this.append(e),r.append(u),this.activity.loader(!1),this.activity.toggle()},this.start=function(){Yt.add("content",{toggle:function(){Yt.collectionSet(r.render()),Yt.collectionFocus(n||!1,r.render())},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},right:function(){Navigator.move("right")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Yt.toggle("head")},down:function(){Navigator.canmove("down")&&Navigator.move("down")},back:function(){It.backward()}}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return d},this.destroy=function(){a.clear(),o.destroy(s),r.destroy(),t&&t.destroy(),d.remove(),u.remove(),a=null,s=null,d=null,u=null,t=null}},actor:function(e){var t=new l,n=new c({mask:!0}),i=[],a=0;n.render().addClass("layer--wheight"),this.create=function(){var t=this;return this.activity.loader(!0),M.actor(e,(function(e){t.activity.loader(!1),e.actor&&(t.build("start",e.actor),e.movie&&e.movie.results.length&&(e.movie.title="Фильмы",e.movie.noimage=!0,t.build("movie",e.movie)),e.tv&&e.tv.results.length&&(e.tv.title="Сериалы",e.tv.noimage=!0,t.build("tv",e.tv)),t.activity.toggle())}),(function(){})),this.render()},this.build=function(e,t){var o=new ye[e](t,{nomore:!0});o.onDown=this.down,o.onUp=this.up,o.onBack=this.back,o.create(),i.push(o),n.append(o.render())},this.down=function(){a++,a=Math.min(a,i.length-1),i[a].toggle(),n.update(i[a].render())},this.up=function(){--a<0?(a=0,Yt.toggle("head")):i[a].toggle(),n.update(i[a].render())},this.back=function(){It.backward()},this.start=function(){Yt.add("content",{toggle:function(){i.length&&i[a].toggle()}}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return n.render()},this.destroy=function(){t.clear(),o.destroy(i),n.destroy(),i=null,t=null}},favorite:function(e){var t,n,i,a=new l,r=new c({mask:!0}),s=[],d=$("<div></div>"),u=$('<div class="category-full"></div>'),v=0;this.create=function(){var t=this;return this.activity.loader(!0),M.favorite(e,this.build.bind(this),(function(){var e=new se;d.append(e.render()),t.start=e.start,t.activity.loader(!1),t.activity.toggle()})),this.render()},this.next=function(){var t=this;i||e.page<15&&e.page<v&&(i=!0,e.page++,M.favorite(e,(function(e){t.append(e),i=!1,Yt.enable("content")}),(function(){})))},this.append=function(e){var i=this;e.results.forEach((function(e){var o=new D(e,{card_category:!0});o.create(),o.onFocus=function(e,a){n=e,r.update(o.render(),!0),ie.change(h.cardImgBackground(a)),t.update(a);var l=Math.ceil(s.length/7)-1;Math.ceil(s.indexOf(o)/7)>=l&&i.next()},o.onEnter=function(t,n){It.push({url:"",component:"full",id:e.id,method:n.name?"tv":"movie",card:e})},o.visible(),u.append(o.render()),s.push(o)}))},this.build=function(e){v=e.total_pages,(t=new re).create(),r.render().addClass("layer--wheight").data("mheight",t.render()),d.append(t.render()),d.append(r.render()),this.append(e),r.append(u),this.activity.loader(!1),this.activity.toggle()},this.start=function(){Yt.add("content",{toggle:function(){Yt.collectionSet(r.render()),Yt.collectionFocus(n||!1,r.render())},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},right:function(){Navigator.move("right")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Yt.toggle("head")},down:function(){Navigator.canmove("down")&&Navigator.move("down")},back:function(){It.backward()}}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return d},this.destroy=function(){a.clear(),o.destroy(s),r.destroy(),t&&t.destroy(),d.remove(),u.remove(),a=null,s=null,d=null,u=null,t=null}},torrents:function(e){var t,n,i=new l,a=new c({mask:!0}),s=new we(e),d=new Se(e),u=[],v=[],g=1,f=0,p={quality:["Любое","4k","1080p","720p"],hdr:["Не выбрано","Да","Нет"],sub:["Не выбрано","Да","Нет"],voice:[]},m=["Laci","Kerob","LE-Production","Parovoz Production","Paradox","Omskbird","LostFilm","Причудики","BaibaKo","NewStudio","AlexFilm","FocusStudio","Gears Media","Jaskier","ViruseProject","Кубик в Кубе","IdeaFilm","Sunshine Studio","Ozz.tv","Hamster Studio","Сербин","To4ka","Кравец","Victory-Films","SNK-TV","GladiolusTV","Jetvis Studio","ApofysTeam","ColdFilm","Agatha Studdio","KinoView","Jimmy J.","Shadow Dub Project","Amedia","Red Media","Selena International","Гоблин","Universal Russia","Kiitos","Paramount Comedy","Кураж-Бамбей","Студия Пиратского Дубляжа","Чадов","Карповский","RecentFilms","Первый канал","Alternative Production","NEON Studio","Колобок","Дольский","Синема УС","Гаврилов","Живов","SDI Media","Алексеев","GreenРай Studio","Михалев","Есарев","Визгунов","Либергал","Кузнецов","Санаев","ДТВ","Дохалов","Sunshine Studio","Горчаков","LevshaFilm","CasStudio","Володарский","ColdFilm","Шварко","Карцев","ETV+","ВГТРК","Gravi-TV","1001cinema","Zone Vision Studio","Хихикающий доктор","Murzilka","turok1990","FOX","STEPonee","Elrom","Колобок","HighHopes","SoftBox","GreenРай Studio","NovaFilm","Четыре в квадрате","Greb&Creative","MUZOBOZ","ZM-Show","RecentFilms","Kerems13","Hamster Studio","New Dream Media","Игмар","Котов","DeadLine Studio","Jetvis Studio","РенТВ","Андрей Питерский","Fox Life","Рыбин","Trdlo.studio","Studio Victory Аsia","Ozeon","НТВ","CP Digital","AniLibria","STEPonee","Levelin","FanStudio","Cmert","Интерфильм","SunshineStudio","Kulzvuk Studio","Кашкин","Вартан Дохалов","Немахов","Sedorelli","СТС","Яроцкий","ICG","ТВЦ","Штейн","AzOnFilm","SorzTeam","Гаевский","Мудров","Воробьев Сергей","Студия Райдо","DeeAFilm Studio","zamez","ViruseProject","Иванов","STEPonee","РенТВ","СВ-Дубль","BadBajo","Комедия ТВ","Мастер Тэйп","5-й канал СПб","SDI Media","Гланц","Ох! Студия","СВ-Кадр","2x2","Котова","Позитив","RusFilm","Назаров","XDUB Dorama","Реальный перевод","Kansai","Sound-Group","Николай Дроздов","ZEE TV","Ozz.tv","MTV","Сыендук","GoldTeam","Белов","Dream Records","Яковлев","Vano","SilverSnow","Lord32x","Filiza Studio","Sony Sci-Fi","Flux-Team","NewStation","XDUB Dorama","Hamster Studio","Dream Records","DexterTV","ColdFilm","Good People","RusFilm","Levelin","AniDUB","SHIZA Project","AniLibria.TV","StudioBand","AniMedia","Kansai","Onibaku","JWA Project","MC Entertainment","Oni","Jade","Ancord","ANIvoice","Nika Lenina","Bars MacAdams","JAM","Anika","Berial","Kobayashi","Cuba77","RiZZ_fisher","OSLIKt","Lupin","Ryc99","Nazel & Freya","Trina_D","JeFerSon","Vulpes Vulpes","Hamster","KinoGolos","Fox Crime","Денис Шадинский","AniFilm","Rain Death","LostFilm","New Records","Ancord","Первый ТВЧ","RG.Paravozik","Profix Media","Tycoon","RealFake","HDrezka","Jimmy J.","AlexFilm","Discovery","Viasat History","AniMedia","JAM","HiWayGrope","Ancord","СВ-Дубль","Tycoon","SHIZA Project","GREEN TEA","STEPonee","AlphaProject","AnimeReactor","Animegroup","Shachiburi","Persona99","3df voice","CactusTeam","AniMaunt","AniMedia","AnimeReactor","ShinkaDan","Jaskier","ShowJet","RAIM","RusFilm","Victory-Films","АрхиТеатр","Project Web Mania","ko136","КураСгречей","AMS","СВ-Студия","Храм Дорам ТВ","TurkStar","Медведев","Рябов","BukeDub","FilmGate","FilmsClub","Sony Turbo","ТВЦ","AXN Sci-Fi","NovaFilm","DIVA Universal","Курдов","Неоклассика","fiendover","SomeWax","Логинофф","Cartoon Network","Sony Turbo","Loginoff","CrezaStudio","Воротилин","LakeFilms","Andy","CP Digital","XDUB Dorama + Колобок","SDI Media","KosharaSerials","Екатеринбург Арт","Julia Prosenuk","АРК-ТВ Studio","Т.О Друзей","Anifilm","Animedub","AlphaProject","Paramount Channel","Кириллица","AniPLague","Видеосервис","JoyStudio","HighHopes","TVShows","AniFilm","GostFilm","West Video","Формат AB","Film Prestige","West Video","Екатеринбург Арт","SovetRomantica","РуФилмс","AveBrasil","Greb&Creative","BTI Studios","Пифагор","Eurochannel","NewStudio","Кармен Видео","Кошкин","Кравец","Rainbow World","Воротилин","Варус-Видео","ClubFATE","HiWay Grope","Banyan Studio","Mallorn Studio","Asian Miracle Group","Эй Би Видео","AniStar","Korean Craze","LakeFilms","Невафильм","Hallmark","Netflix","Mallorn Studio","Sony Channel","East Dream","Bonsai Studio","Lucky Production","Octopus","TUMBLER Studio","CrazyCatStudio","Amber","Train Studio","Анастасия Гайдаржи","Мадлен Дюваль","Fox Life","Sound Film","Cowabunga Studio","Фильмэкспорт","VO-Production","Sound Film","Nickelodeon","MixFilm","GreenРай Studio","Sound-Group","Back Board Cinema","Кирилл Сагач","Bonsai Studio","Stevie","OnisFilms","MaxMeister","Syfy Universal","TUMBLER Studio","NewStation","Neo-Sound","Муравский","IdeaFilm","Рутилов","Тимофеев","Лагута","Дьяконов","Zone Vision Studio","Onibaku","AniMaunt","Voice Project","AniStar","Пифагор","VoicePower","StudioFilms","Elysium","AniStar","BeniAffet","Selena International","Paul Bunyan","CoralMedia","Кондор","Игмар","ViP Premiere","FireDub","AveTurk","Sony Sci-Fi","Янкелевич","Киреев","Багичев","2x2","Лексикон","Нота","Arisu","Superbit","AveDorama","VideoBIZ","Киномания","DDV","Alternative Production","WestFilm","Анастасия Гайдаржи + Андрей Юрченко","Киномания","Agatha Studdio","GreenРай Studio","VSI Moscow","Horizon Studio","Flarrow Films","Amazing Dubbing","Asian Miracle Group","Видеопродакшн","VGM Studio","FocusX","CBS Drama","NovaFilm","Novamedia","East Dream","Дасевич","Анатолий Гусев","Twister","Морозов","NewComers","kubik&ko","DeMon","Анатолий Ашмарин","Inter Video","Пронин","AMC","Велес","Volume-6 Studio","Хоррор Мэйкер","Ghostface","Sephiroth","Акира","Деваль Видео","RussianGuy27","neko64","Shaman","Franek Monk","Ворон","Andre1288","Selena International","GalVid","Другое кино","Студия NLS","Sam2007","HaseRiLLoPaW","Севастьянов","D.I.M.","Марченко","Журавлев","Н-Кино","Lazer Video","SesDizi","Red Media","Рудой","Товбин","Сергей Дидок","Хуан Рохас","binjak","Карусель","Lizard Cinema","Варус-Видео","Акцент","RG.Paravozik","Max Nabokov","Barin101","Васька Куролесов","Фортуна-Фильм","Amalgama","AnyFilm","Студия Райдо","Козлов","Zoomvision Studio","Пифагор","Urasiko","VIP Serial HD","НСТ","Кинолюкс","Project Web Mania","Завгородний","AB-Video","Twister","Universal Channel","Wakanim","SnowRecords","С.Р.И","Старый Бильбо","Ozz.tv","Mystery Film","РенТВ","Латышев","Ващенко","Лайко","Сонотек","Psychotronic","DIVA Universal","Gremlin Creative Studio","Нева-1","Максим Жолобов","Good People","Мобильное телевидение","Lazer Video","IVI","DoubleRec","Milvus","RedDiamond Studio","Astana TV","Никитин","КТК","D2Lab","НСТ","DoubleRec","Black Street Records","Останкино","TatamiFilm","Видеобаза","Crunchyroll","Novamedia","RedRussian1337","КонтентикOFF","Creative Sound","HelloMickey Production","Пирамида","CLS Media","Сонькин","Мастер Тэйп","Garsu Pasaulis","DDV","IdeaFilm","Gold Cinema","Че!","Нарышкин","Intra Communications","OnisFilms","XDUB Dorama","Кипарис","Королёв","visanti-vasaer","Готлиб","Paramount Channel","СТС","диктор CDV","Pazl Voice","Прямостанов","Zerzia","НТВ","MGM","Дьяков","Вольга","АРК-ТВ Studio","Дубровин","МИР","Netflix","Jetix","Кипарис","RUSCICO","Seoul Bay","Филонов","Махонько","Строев","Саня Белый","Говинда Рага","Ошурков","Horror Maker","Хлопушка","Хрусталев","Антонов Николай","Золотухин","АрхиАзия","Попов","Ultradox","Мост-Видео","Альтера Парс","Огородников","Твин","Хабар","AimaksaLTV","ТНТ","FDV","3df voice","The Kitchen Russia","Ульпаней Эльром","Видеоимпульс","GoodTime Media","Alezan","True Dubbing Studio","FDV","Карусель","Интер","Contentica","Мельница","RealFake","ИДДК","Инфо-фильм","Мьюзик-трейд","Кирдин | Stalk","ДиоНиК","Стасюк","TV1000","Hallmark","Тоникс Медиа","Бессонов","Gears Media","Бахурани","NewDub","Cinema Prestige","Набиев","New Dream Media","ТВ3","Малиновский Сергей","Superbit","Кенс Матвей","LE-Production","Voiz","Светла","Cinema Prestige","JAM","LDV","Videogram","Индия ТВ","RedDiamond Studio","Герусов","Элегия фильм","Nastia","Семыкина Юлия","Электричка","Штамп Дмитрий","Пятница","Oneinchnales","Gravi-TV","D2Lab","Кинопремьера","Бусов Глеб","LE-Production","1001cinema","Amazing Dubbing","Emslie","1+1","100 ТВ","1001 cinema","2+2","2х2","3df voice","4u2ges","5 канал","A. Lazarchuk","AAA-Sound","AB-Video","AdiSound","ALEKS KV","AlexFilm","AlphaProject","Alternative Production","Amalgam","AMC","Amedia","AMS","Andy","AniLibria","AniMedia","Animegroup","Animereactor","AnimeSpace Team","Anistar","AniUA","AniWayt","Anything-group","AOS","Arasi project","ARRU Workshop","AuraFilm","AvePremier","AveTurk","AXN Sci-Fi","Azazel","AzOnFilm","BadBajo","BadCatStudio","BBC Saint-Petersburg","BD CEE","Black Street Records","Bonsai Studio","Boльгa","Brain Production","BraveSound","BTI Studios","Bubble Dubbing Company","Byako Records","Cactus Team","Cartoon Network","CBS Drama","CDV","Cinema Prestige","CinemaSET GROUP","CinemaTone","ColdFilm","Contentica","CP Digital","CPIG","Crunchyroll","Cuba77","D1","D2lab","datynet","DDV","DeadLine","DeadSno","DeMon","den904","Description","DexterTV","Dice","Discovery","DniproFilm","DoubleRec","DreamRecords","DVD Classic","East Dream","Eladiel","Elegia","ELEKTRI4KA","Elrom","ELYSIUM","Epic Team","eraserhead","erogg","Eurochannel","Extrabit","F-TRAIN","Family Fan Edition","FDV","FiliZa Studio","Film Prestige","FilmGate","FilmsClub","FireDub","Flarrow Films","Flux-Team","FocusStudio","FOX","Fox Crime","Fox Russia","FoxLife","Foxlight","Franek Monk","Gala Voices","Garsu Pasaulis","Gears Media","Gemini","General Film","GetSmart","Gezell Studio","Gits","GladiolusTV","GoldTeam","Good People","Goodtime Media","GoodVideo","GostFilm","Gramalant","Gravi-TV","GREEN TEA","GreenРай Studio","Gremlin Creative Studio","Hallmark","HamsterStudio","HiWay Grope","Horizon Studio","hungry_inri","ICG","ICTV","IdeaFilm","IgVin &amp; Solncekleshka","ImageArt","INTERFILM","Ivnet Cinema","IНТЕР","Jakob Bellmann","JAM","Janetta","Jaskier","JeFerSon","jept","JetiX","Jetvis","JimmyJ","KANSAI","KIHO","kiitos","KinoGolos","Kinomania","KosharaSerials","Kолобок","L0cDoG","LakeFilms","LDV","LE-Production","LeDoyen","LevshaFilm","LeXiKC","Liga HQ","Line","Lisitz","Lizard Cinema Trade","Lord32x","lord666","LostFilm","Lucky Production","Macross","madrid","Mallorn Studio","Marclail","Max Nabokov","MC Entertainment","MCA","McElroy","Mega-Anime","Melodic Voice Studio","metalrus","MGM","MifSnaiper","Mikail","Milirina","MiraiDub","MOYGOLOS","MrRose","MTV","Murzilka","MUZOBOZ","National Geographic","NemFilm","Neoclassica","NEON Studio","New Dream Media","NewComers","NewStation","NewStudio","Nice-Media","Nickelodeon","No-Future","NovaFilm","Novamedia","Octopus","Oghra-Brown","OMSKBIRD","Onibaku","OnisFilms","OpenDub","OSLIKt","Ozz TV","PaDet","Paramount Comedy","Paramount Pictures","Parovoz Production","PashaUp","Paul Bunyan","Pazl Voice","PCB Translate","Persona99","PiratVoice","Postmodern","Profix Media","Project Web Mania","Prolix","QTV","R5","Radamant","RainDeath","RATTLEBOX","RealFake","Reanimedia","Rebel Voice","RecentFilms","Red Media","RedDiamond Studio","RedDog","RedRussian1337","Renegade Team","RG Paravozik","RinGo","RoxMarty","Rumble","RUSCICO","RusFilm","RussianGuy27","Saint Sound","SakuraNight","Satkur","Sawyer888","Sci-Fi Russia","SDI Media","Selena","seqw0","SesDizi","SGEV","Shachiburi","SHIZA","ShowJet","Sky Voices","SkyeFilmTV","SmallFilm","SmallFilm","SNK-TV","SnowRecords","SOFTBOX","SOLDLUCK2","Solod","SomeWax","Sony Channel","Sony Turbo","Sound Film","SpaceDust","ssvss","st.Elrom","STEPonee","SunshineStudio","Superbit","Suzaku","sweet couple","TatamiFilm","TB5","TF-AniGroup","The Kitchen Russia","The Mike Rec.","Timecraft","To4kaTV","Tori","Total DVD","TrainStudio","Troy","True Dubbing Studio","TUMBLER Studio","turok1990","TV 1000","TVShows","Twister","Twix","Tycoon","Ultradox","Universal Russia","VashMax2","VendettA","VHS","VicTeam","VictoryFilms","Video-BIZ","Videogram","ViruseProject","visanti-vasaer","VIZ Media","VO-production","Voice Project Studio","VoicePower","VSI Moscow","VulpesVulpes","Wakanim","Wayland team","WestFilm","WiaDUB","WVoice","XL Media","XvidClub Studio","zamez","ZEE TV","Zendos","ZM-SHOW","Zone Studio","Zone Vision","Агапов","Акопян","Алексеев","Артемьев","Багичев","Бессонов","Васильев","Васильцев","Гаврилов","Герусов","Готлиб","Григорьев","Дасевич","Дольский","Карповский","Кашкин","Киреев","Клюквин","Костюкевич","Матвеев","Михалев","Мишин","Мудров","Пронин","Савченко","Смирнов","Тимофеев","Толстобров","Чуев","Шуваев","Яковлев","ААА-sound","АБыГДе","Акалит","Акира","Альянс","Амальгама","АМС","АнВад","Анубис","Anubis","Арк-ТВ","АРК-ТВ Studio","Б. Федоров","Бибиков","Бигыч","Бойков","Абдулов","Белов","Вихров","Воронцов","Горчаков","Данилов","Дохалов","Котов","Кошкин","Назаров","Попов","Рукин","Рутилов","Варус Видео","Васька Куролесов","Ващенко С.","Векшин","Велес","Весельчак","Видеоимпульс","Витя «говорун»","Войсовер","Вольга","Ворон","Воротилин","Г. Либергал","Г. Румянцев","Гей Кино Гид","ГКГ","Глуховский","Гризли","Гундос","Деньщиков","Есарев","Нурмухаметов","Пучков","Стасюк","Шадинский","Штамп","sf@irat","Держиморда","Домашний","ДТВ","Дьяконов","Е. Гаевский","Е. Гранкин","Е. Лурье","Е. Рудой","Е. Хрусталёв","ЕА Синема","Екатеринбург Арт","Живаго","Жучков","З Ранку До Ночі","Завгородний","Зебуро","Зереницын","И. Еремеев","И. Клушин","И. Сафронов","И. Степанов","ИГМ","Игмар","ИДДК","Имидж-Арт","Инис","Ирэн","Ист-Вест","К. Поздняков","К. Филонов","К9","Карапетян","Кармен Видео","Карусель","Квадрат Малевича","Килька","Кипарис","Королев","Котова","Кравец","Кубик в Кубе","Кураж-Бамбей","Л. Володарский","Лазер Видео","ЛанселаП","Лапшин","Лексикон","Ленфильм","Леша Прапорщик","Лизард","Люсьена","Заугаров","Иванов","Иванова и П. Пашут","Латышев","Ошурков","Чадов","Яроцкий","Максим Логинофф","Малиновский","Марченко","Мастер Тэйп","Махонько","Машинский","Медиа-Комплекс","Мельница","Мика Бондарик","Миняев","Мительман","Мост Видео","Мосфильм","Муравский","Мьюзик-трейд","Н-Кино","Н. Антонов","Н. Дроздов","Н. Золотухин","Н.Севастьянов seva1988","Набиев","Наталья Гурзо","НЕВА 1","Невафильм","НеЗупиняйПродакшн","Неоклассика","Несмертельное оружие","НЛО-TV","Новий","Новый диск","Новый Дубляж","Новый Канал","Нота","НСТ","НТВ","НТН","Оверлорд","Огородников","Омикрон","Гланц","Карцев","Морозов","Прямостанов","Санаев","Парадиз","Пепелац","Первый канал ОРТ","Переводман","Перец","Петербургский дубляж","Петербуржец","Пирамида","Пифагор","Позитив-Мультимедиа","Прайд Продакшн","Премьер Видео","Премьер Мультимедиа","Причудики","Р. Янкелевич","Райдо","Ракурс","РенТВ","Россия","РТР","Русский дубляж","Русский Репортаж","РуФилмс","Рыжий пес","С. Визгунов","С. Дьяков","С. Казаков","С. Кузнецов","С. Кузьмичёв","С. Лебедев","С. Макашов","С. Рябов","С. Щегольков","С.Р.И.","Сolumbia Service","Самарский","СВ Студия","СВ-Дубль","Светла","Селена Интернешнл","Синема Трейд","Синема УС","Синта Рурони","Синхрон","Советский","Сокуров","Солодухин","Сонотек","Сонькин","Союз Видео","Союзмультфильм","СПД - Сладкая парочка","Строев","СТС","Студии Суверенного Лепрозория","Студия «Стартрек»","KOleso","Студия Горького","Студия Колобок","Студия Пиратского Дубляжа","Студия Райдо","Студия Трёх","Гуртом","Супербит","Сыендук","Так Треба Продакшн","ТВ XXI век","ТВ СПб","ТВ-3","ТВ6","ТВИН","ТВЦ","ТВЧ 1","ТНТ","ТО Друзей","Толмачев","Точка Zрения","Трамвай-фильм","ТРК","Уолт Дисней Компани","Хихидок","Хлопушка","Цікава Ідея","Четыре в квадрате","Швецов","Штамп","Штейн","Ю. Живов","Ю. Немахов","Ю. Сербин","Ю. Товбин","Я. Беллманн"],_=h.checkHttp(ln.field("torlook_site"))+"/";a.minus(),a.body().addClass("torrent-list"),this.create=function(){var t=this;return this.activity.loader(!0),ie.change(h.cardImgBackground(e.movie)),ln.set("torrents_filter","{}"),"jackett"==ln.field("parser_torrent_type")?ln.field("jackett_url")?(n=h.checkHttp(ln.field("jackett_url")),this.loadJackett()):this.empty():ln.get("native")?this.loadTorlook():"site"==ln.field("torlook_parse_type")&&ln.field("parser_website_url")?(n=h.checkHttp(ln.field("parser_website_url")),this.loadTorlook()):"native"==ln.field("torlook_parse_type")?this.loadTorlook():this.empty(),d.onSearch=function(e){It.replace({search:e})},d.onBack=function(){t.start()},this.render()},this.loadTorlook=function(){var t=this;i.timeout(6e4);var o=ln.get("native")||"native"==ln.field("torlook_parse_type")?_+encodeURIComponent(e.search):n.replace("{q}",encodeURIComponent(_+encodeURIComponent(e.search)));i.native(o,(function(e){var n=e.replace(/\n|\r/g,"").match(new RegExp('<div class="webResult item">(.*?)</div>',"g")),i={Results:[]};$.each(n,(function(e,t){t=t.replace(/<img[^>]+>/g,"");var n=$(t+"</div>"),o={};o.Title=$(">p>a",n).text(),o.Tracker=$(".h2 > a",n).text(),o.size=$(".size",n).text(),o.Size=h.sizeToBytes(o.size),o.PublishDate=$(".date",n).text()+"T22:00:00",o.Seeders=parseInt($(".seeders",n).text()),o.Peers=parseInt($(".leechers",n).text()),o.reguest=$(".magneto",n).attr("data-src"),o.PublisTime=h.strToTime(o.PublishDate),n.remove(),o.Title&&o.reguest&&i.Results.push(o)})),u=i,t.build(),t.activity.loader(!1),t.activity.toggle()}),(function(e,n){t.empty()}),!1,{dataType:"text"})},this.loadJackett=function(){var t=this;i.timeout(15e3);var o=n+"/api/v2.0/indexers/all/results?apikey="+ln.get("jackett_key")+"&Query="+encodeURIComponent(e.search),a=e.movie.genres.map((function(e){return e.name}));e.search==e.movie.original_title&&(o=h.addUrlComponent(o,"title="+encodeURIComponent(e.movie.title)),o=h.addUrlComponent(o,"title_original="+encodeURIComponent(e.movie.original_title))),o=h.addUrlComponent(o,"year="+encodeURIComponent((e.movie.release_date||e.movie.first_air_date||"0000").slice(0,4))),o=h.addUrlComponent(o,"is_serial="+(e.movie.first_air_date?"true":"false")),o=h.addUrlComponent(o,"genres="+encodeURIComponent(a.join(","))),i.native(o,(function(e){e.Results.forEach((function(e){e.PublisTime=h.strToTime(e.PublishDate)})),u=e,t.build(),t.activity.loader(!1),t.activity.toggle()}),this.empty.bind(this))},this.empty=function(){var e=new se;s.append(e.render(d.empty())),this.start=e.start,this.activity.loader(!1),this.activity.toggle()},this.buildSorted=function(){var e=ln.get("torrents_sort","Seeders"),t=[{title:"По раздающим",sort:"Seeders"},{title:"По размеру",sort:"Size"},{title:"По названию",sort:"Title"},{title:"По источнику",sort:"Tracker"},{title:"По дате",sort:"PublisTime"}];t.forEach((function(t){t.sort==e&&(t.selected=!0)})),d.sort(u.Results,e),d.set("sort",t)},this.buildFilterd=function(){var e=ln.get("torrents_filter","{}"),t=[],n=function(n,i){var o=p[n],a=[];o.forEach((function(t,i){a.push({title:t,selected:e[n]==i,index:i})})),t.push({title:i,subtitle:e[n]?o[e[n]]:o[0],items:a,stype:n})};p.voice=["Любой","Дубляж","Многоголосый","Двухголосый","Любительский"],u.Results.forEach((function(e){for(var t=e.Title.toLowerCase(),n=0;n<m.length;n++){var i=m[n].toLowerCase();t.indexOf(i)>=0&&-1==p.voice.indexOf(m[n])&&p.voice.push(m[n])}})),n("quality","Качество"),n("hdr","HDR"),n("sub","Субтитры"),n("voice","Перевод"),d.set("filter",t)},this.build=function(){var e=this;this.buildSorted(),this.buildFilterd(),this.filtred(),d.onSelect=function(n,i,o){if("sort"==n)ln.set("torrents_sort",i.sort),d.sort(u.Results,i.sort);else{var r=ln.get("torrents_filter","{}");r[i.stype]=o.index,i.subtitle=o.title,ln.set("torrents_filter",r)}e.filtred(),e.reset(),e.showResults(),t=a.render().find(".torrent-item:eq(0)")[0],e.start()},u.Results.length?this.showResults():this.empty()},this.filtred=function(){var e=ln.get("torrents_filter","{}"),t=!1;for(var n in e)e[n]&&(t=!0);v=u.Results.filter((function(n){if(t){var i=!1,o=!1,a=n.Title.toLowerCase(),r=e.quality,s=e.hdr,l=e.sub,c=e.voice,d=function(e,t){new RegExp(e).test(a)?t?o=!0:i=!0:t?i=!0:o=!0};return r&&d(1==r?"(4k|uhd)[ |\\]|,|$]|2160[pр]|ultrahd":2==r?"fullhd|1080[pр]":"720[pр]"),s&&(1==s?d("[\\[| ]hdr[10| |\\]|,|$]"):d("[\\[| ]hdr[10| |\\]|,|$]",!0)),l&&(1==l?d(" sub"):/ sub/.test(a)&&(o=!0)),c&&d(1==c?"дублирован|дубляж|  apple| d[,| |$]":2==c?"многоголос| p[,| |$]":3==c?"двухголос|двуголос| l2[,| |$]":4==c?"любитель|авторский| l1[,| |$]":p.voice[c].toLowerCase()),!o&&!!i}return!0}))},this.showResults=function(){g=Math.ceil(v.length/20),d.render().addClass("torrent-filter"),a.append(d.render()),this.append(v.slice(0,20)),s.append(a.render())},this.reset=function(){t=!1,d.render().detach(),a.clear()},this.next=function(){if(e.page<15&&e.page<g){e.page++;var t=20*(e.page-1);this.append(v.slice(t,t+20)),Yt.enable("content")}},this.loadMagnet=function(e){i.timeout(15e3);var t=ln.get("native")||"native"==ln.field("torlook_parse_type")?_+e.reguest:n.replace("{q}",encodeURIComponent(_+e.reguest));i.silent(t,(function(t){var n=t.match(/magnet:(.*?)'/);n&&n[1]?(_e.close(),e.MagnetUri="magnet:"+n[1],ut.start(e)):_e.update(r.get("error",{title:"Ошибка",text:"Неудалось получить magnet ссылку"}))}),(function(e,t){_e.update(r.get("error",{title:"Ошибка",text:i.errorDecode(e,t)}))}),!1,{dataType:"text"}),_e.open({title:"",html:r.get("modal_pending",{text:"Запрашиваю magnet ссылку"}),onBack:function(){_e.close(),i.clear(),Yt.toggle("content")}})},this.append=function(n){var i=this;n.forEach((function(n){f++;var s=h.parseTime(n.PublishDate),l=f;o.extend(n,{title:n.Title,date:s.full,tracker:n.Tracker,size:n.Size?h.bytesToSize(n.Size):n.size,seeds:n.Seeders,grabs:n.Peers});var c=r.get("torrent",n);c.on("hover:focus",(function(n){t=n.target,a.update($(n.target),!0),l>20*e.page-4&&i.next()})).on("hover:enter",(function(){n.reguest&&!n.MagnetUri?i.loadMagnet(n):ut.start(n)})),a.append(c)}))},this.back=function(){It.backward()},this.start=function(){Yt.add("content",{toggle:function(){Yt.collectionSet(a.render()),Yt.collectionFocus(t||!1,a.render())},up:function(){Navigator.canmove("up")?Navigator.move("up"):Yt.toggle("head")},down:function(){Navigator.move("down")},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},back:this.back}),Yt.toggle("content")},this.pause=function(){},this.stop=function(){},this.render=function(){return s.render()},this.destroy=function(){i.clear(),s.destroy(),a.destroy(),u=null,i=null}}};var ft={},pt=[];function mt(){var e=0;return pt.forEach((function(t){var n=new Date(t.time).getTime();e=Math.max(e,n)})),e}function ht(){vt.find(".notice--icon").toggleClass("active",mt()>ft.time)}var _t,bt,yt={open:function(){var e=$("<div></div>");pt.slice(0,5).forEach((function(t){var n=r.get("notice",t);e.append(n)})),_e.open({title:"Уведомления",size:"medium",html:e,onBack:function(){_e.close(),Yt.toggle("head")}}),ft.time=mt(),ln.set("notice",ft),ht()},start:function(e){vt=e,ht()},init:function(){ft=ln.get("notice","{}"),pt=[{time:"2021-10-07 17:00",title:"Обновление 1.2.1",descr:"1. Исправлен баг с кнопкой назад в MSX<br>2. Исправлен баг с поиском<br>3. Добавлен фильтр в торрентах<br>4. Визуально доработан плеер<br>5. Добавлены настройки быстродействия<br>6. Исправлены имена в торрент-файлах<br>7. Исправлен баг с паузой в плеере<br>8. Исправлены другие мелкие ошибки и баги"},{time:"2021-10-03 12:00",title:"Обновление 1.0.10",descr:"1. Доработана подгрузка карточек в мелком режиме<br>2. Добавлены логи, для просмотра логов наведите на шапку и щелкайте вверх 10 раз"},{time:"2021-10-01 09:00",title:"Обновление 1.0.9",descr:"1. Доработан фон в закладках и в фильме<br>2. Изменены инструкции<br>3. Доделан плагин под Orsay"},{time:"2021-09-30 18:00",title:"Обновление 1.0.8",descr:"1. Доработан фон<br>2. Выведена кнопка (Торренты)<br>3. Добавлена сортировка торрентов<br>4. Доделан выход под Tizen и WebOS<br> 5. Возможно доделаны кнопки управления под Orsay"},{time:"2021-09-29 17:00",title:"Обновление 1.0.7",descr:"1. Оптимизирована главная страница и каталоги<br>2. Добавлена авторизация для TorServer<br> 3. Добавлены подсказки ошибок в TorServer"},{time:"2021-09-28 16:00",title:"Исправления",descr:"1. Исправлена ошибка (Невозможно получить HASH)<br>2. Доделан парсер для MSX, теперь не нужно указывать явную ссылку, только по желанию<br> 3. Улучшен парсер jac.red, теперь точнее ищет"},{time:"2021-09-27 15:00",title:"Исправлен парсер",descr:"В парсере была выявлена ошибка, из за которой jac.red не выдавал результаты"},{time:"2021-09-26 17:00",title:"Добро пожаловать!",descr:"Это ваш первый запуск приложения, надеемся вам очень понравится. Приятного вам просмотра."}],o.extend(ft,{time:0})}};var wt,kt,St,xt={render:function(){return _t},title:function(e){_t.find(".head__title").text(e?"- "+e:"")},init:function(){_t=r.get("head"),h.time(_t),yt.start(_t),_t.find(".selector").on("hover:focus",(function(e){bt=e.target})),_t.find(".open--settings").on("hover:enter",(function(){Yt.toggle("settings")})),_t.find(".open--notice").on("hover:enter",(function(){yt.open()})),Yt.add("head",{toggle:function(){Yt.collectionSet(_t),Yt.collectionFocus(bt,_t)},right:function(){Navigator.move("right")},left:function(){Navigator.canmove("left")?Navigator.move("left"):Yt.toggle("menu")},down:function(){Yt.toggle("content")},back:function(){It.backward()}})}},Ct=t(),Tt=[],Mt=!1,Nt=!1;function zt(e){var t=r.get("activity"),n=t.find(".activity__body");this.stoped=!1,this.started=!1,this.append=function(){kt.append(t)},this.create=function(){e.create(n),n.append(e.render())},this.loader=function(e){t.toggleClass("activity--load",e)},this.restart=function(){this.append(),this.stoped=!1,e.start()},this.start=function(){this.started=!0,Yt.add("content",{invisible:!0,toggle:function(){},left:function(){Yt.toggle("menu")},up:function(){Yt.toggle("head")},back:function(){zt.backward()}}),Yt.toggle("content"),this.stoped?this.restart():e.start()},this.pause=function(){this.started=!1,e.pause()},this.toggle=function(){this.started&&this.start()},this.stop=function(){this.started=!1,this.stoped||(this.stoped=!0,e.stop(),t.detach())},this.render=function(){return t},this.destroy=function(){e.destroy(),t.remove()},this.append()}function At(e){!function(){var e=Et();e&&e.activity&&e.activity.pause();var t=Tt.slice(-2);t.length>1&&t[0].activity&&t[0].activity.stop();var n=Tt.slice(-St);if(n.length>St-1){var i=n[0];i.activity&&(i.activity.destroy(),i.activity=null)}}(),Ft(e),Tt.push(e),Ot(e)}function Ft(e){var t=function(e){return new gt[e.component](e)}(e);e.activity=new zt(t),t.activity=e.activity,e.activity.create()}function Dt(){window.history.back()}function Et(){return Tt[Tt.length-1]}function Bt(){window.history.pushState(null,null,window.location.pathname)}function Rt(){if(Mt=!1,Ct.send("backward",{count:Tt.length}),1!=Tt.length){kt.find(">div").removeClass("activity--active");var e=Tt.pop();e&&setTimeout((function(){e.activity.destroy()}),200);var t=Tt.slice(-St);t.length>St-1&&Ft(t[0]),(t=Tt.slice(-1)[0])&&(t.activity||Ft(t),Ot(t))}}function Vt(e){var t={};for(var n in e)"activity"!==n&&(t[n]=e[n]);return t}function Ot(e){!function(e){var t={};for(var n in e)"activity"!==n&&(t[n]=e[n]);ln.set("activity",t)}(e),e.activity.start(),kt.find("> div").removeClass("activity--active"),e.activity.render().addClass("activity--active"),xt.title(e.title)}var Pt,Lt,$t,It={init:function(){wt=r.get("activitys"),kt=wt.find(".activitys__slides"),St=ln.get("pages_save_total",5),Bt(),window.addEventListener("popstate",(function(){Nt||(Bt(),Ct.send("popstate",{count:Tt.length}),Mt?Mt():Rt())})),ln.listener.follow("change",(function(e){"pages_save_total"==e.name&&(St=ln.get("pages_save_total",5))}))},listener:Ct,push:At,back:Dt,render:function(){return wt},backward:Rt,call:function(e){Mt=e},last:function(){var e=ln.get("activity","false");At(e||{url:"",title:"Главная",component:"main"})},out:function(){Nt=!0,Dt();for(var e=0;e<window.history.length;e++)Dt();setTimeout((function(){Nt=!1,Bt()}),100)},replace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Vt(Et());for(var n in e)t[n]=e[n];Et().activity.destroy(),Tt.pop(),At(t)}},jt=t(),Gt="",Ut={};function Kt(e,t){Pt&&Pt[e]&&("function"==typeof Pt[e]?Pt[e](t):"string"==typeof Pt[e]&&Kt(Pt[e],t))}function Ht(e){Pt&&Pt.gone&&Pt.gone(e),Ut[e]&&(Pt=Ut[e],Gt=e,It.call((function(){Kt("back")})),Pt.toggle&&Pt.toggle(),Lt=$(".selector"),jt.send("toggle",{name:e}))}var Jt,Wt,Zt,Yt={listener:jt,add:function(e,t){Ut[e]=t},move:function(e){Kt(e)},enter:function(){Pt&&Pt.enter?Kt("enter"):$t&&$t.trigger("hover:enter")},finish:function(){Kt("finish")},toggle:Ht,trigger:function(e,t){Kt(e,t)},back:function(){Kt("back")},focus:function(e){Lt&&Lt.removeClass("focus enter"),$(e).addClass("focus").trigger("hover:focus"),$t=$(e)},collectionSet:function(e){var t=e.find(".selector").toArray();(t.length||Pt.invisible)&&($t=!1,$(".selector").removeClass("focus enter"),Lt&&Lt.unbind(".hover"),Navigator.setCollection(t))},collectionFocus:function(e,t){if(e)Navigator.focus(e);else{var n=t.find(".selector").toArray();n.length&&Navigator.focus(n[0])}},enable:function(e){Gt==e&&Ht(e)},enabled:function(){return{name:Gt,controller:Pt}},long:function(){Pt&&Pt.long?Kt("long"):$t&&$t.trigger("hover:long")}};function qt(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=window.SimpleKeyboard.default,a={en:["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{RU} q w e r t y u i o p","a s d f g h j k l {enter}","{shift} z x c v b n m , . : http://","{space}"],"en-shift":["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{RU} Q W E R T Y U I O P","A S D F G H J K L {enter}","{shift} Z X C V B N M , . : http://","{space}"],abc:["1 2 3 4 5 6 7 8 9 0 - + = {bksp}","! @ # $ % ^ & * ( ) [ ]","- _ = + \\ | [ ] { } {enter}","; : ' \" , . < > / ?","{rus} {space} {eng}"],default:["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{EN} й ц у к е н г ш щ з х ъ","ф ы в а п р о л д ж э {enter}","{shift} я ч с м и т ь б ю , . : http://","{space}"],"ru-shift":["{abc} 1 2 3 4 5 6 7 8 9 0 - + = {bksp}","{EN} Й Ц У К Е Н Г Ш Щ З Х Ъ","Ф Ы В А П Р О Л Д Ж Э {enter}","{shift} Я Ч С М И Т Ь Б Ю , . : http://","{space}"]};this.listener=t(),this.create=function(){var t=this;e=new o({display:{"{bksp}":"&nbsp;","{enter}":"&nbsp;","{shift}":"&nbsp;","{space}":"&nbsp;","{RU}":"&nbsp;","{EN}":"&nbsp;","{abc}":"&nbsp;","{rus}":"русский","{eng}":"english"},layout:i.layout||a,onChange:function(e){t.listener.send("change",{value:e})},onKeyPress:function(e){"{shift}"===e||"{abc}"===e||"{EN}"===e||"{RU}"===e||"{rus}"===e||"{eng}"===e?t._handle(e):"{enter}"===e&&t.listener.send("enter")}})},this.value=function(t){e.setInput(t),this.listener.send("change",{value:t})},this._layout=function(){var t=$(".simple-keyboard .hg-button").addClass("selector");Yt.collectionSet($(".simple-keyboard")),Yt.collectionFocus(n||t[0],$(".simple-keyboard")),$(".simple-keyboard .hg-button:not(.binded)").on("hover:enter",(function(t,n){Yt.collectionFocus($(this)[0]),n||e.handleButtonClicked($(this).attr("data-skbtn"),t)})).on("hover:focus",(function(e){n=e.target})),t.addClass("binded")},this._handle=function(t){var i=e.options.layoutName,o="default";"{shift}"==t?"default"==i?o="ru-shift":"ru-shift"==i?o="default":"en"==i?o="en-shift":"en-shift"==i&&(o="en"):"{abc}"==t?o="abc":"{EN}"==t||"{eng}"==t?o="en":"{RU}"!=t&&"{rus}"!=t||(o="default"),e.setOptions({layoutName:o}),n=!1,Yt.toggle("keybord")},this.toggle=function(){var e=this;Yt.add("keybord",{toggle:function(){e._layout()},up:function(){Navigator.canmove("up")?Navigator.move("up"):e.listener.send("up")},down:function(){Navigator.canmove("down")?Navigator.move("down"):e.listener.send("down")},left:function(){Navigator.canmove("left")?Navigator.move("left"):e.listener.send("left")},right:function(){Navigator.canmove("right")?Navigator.move("right"):e.listener.send("right")},back:function(){e.listener.send("back")}}),Yt.toggle("keybord")},this.destroy=function(){e.destroy(),this.listener.destroy()}}function Xt(){Wt.destroy(),Jt.remove(),Jt=null,Wt=null,Zt=null,Yt.toggle("settings_component")}var Qt={edit:function(e,t){Jt=r.get("settings_input"),Zt=Jt.find(".settings-input__input"),$("body").append(Jt),(Wt=new qt).listener.follow("change",(function(e){Zt.text(e.value.trim())})),Wt.listener.follow("enter",(function(e){t(Zt.text()),Xt()})),Wt.listener.follow("down",(function(e){F.show({title:"Ссылки",items:[{title:h.shortText("api.scraperapi.com/?url={q}&api_key=",35),subtitle:"scraperapi.com",url:"api.scraperapi.com/?url={q}&api_key="},{title:h.shortText("Для торрентов jac.red",35),subtitle:"jac.red",url:"jac.red"},{title:h.shortText("Для локального TorrServ",35),subtitle:"127.0.0.1:8090",url:"127.0.0.1:8090"}],onSelect:function(e){Wt.value(e.url),Wt.toggle()},onBack:function(){Wt.toggle()}})})),Wt.listener.follow("back",Xt),Wt.create(),Wt.value(e.value),Wt.toggle()}},en={},tn={};function nn(e,t){en[e]={true:"Да",false:"Нет"},tn[e]=t}function on(e,t,n){en[e]=t,tn[e]=n}function an(e){var t=e.data("name"),n=ln.get(t,tn[t]+""),i="string"==typeof en[t]?n:en[t][n]||en[t][tn[t]],o=e.attr("placeholder");!i&&o&&(i=o),e.find(".settings-param__value").text(i)}on("interface_size",{small:"Меньше",normal:"Нормальный"},"normal"),on("parser_torrent_type",{jackett:"Jackett",torlook:"Torlook"},"jackett"),on("torlook_parse_type",{native:"Напрямую",site:"Через API сайта"},"native"),on("background_type",{complex:"Сложный",simple:"Простой",poster:"Картинка"},"complex"),on("pages_save_total",{1:"1",2:"2",3:"3",4:"4",5:"5"},"5"),nn("animation",!0),nn("background",!0),nn("torrserver_savedb",!1),nn("parser_use",!1),nn("torrserver_auth",!1),nn("mask",!0),on("jackett_url","","jac.red"),on("jackett_key","",""),on("torrserver_url","",""),on("torrserver_login","",""),on("torrserver_password","",""),on("parser_website_url","",""),on("torlook_site","","w41.torlook.info");var rn={bind:function(e){e.on("hover:enter",(function(e){var t=$(e.target),n=t.data("type"),i=t.data("name");if("toggle"==n){var a=en[i],r=o.isArray(a)?a:o.getKeys(a),s=ln.get(i,tn[i])+"",l=r.indexOf(s);++l>=r.length&&(l=0),s=r[l=Math.max(0,Math.min(r.length-1,l))],ln.set(i,s),an(t)}"input"==n&&Qt.edit({elem:t,name:i,value:ln.get(i,tn[i])+""},(function(e){ln.set(i,e),an(t)}))})).each((function(){an($(this))}))},update:an,field:function(e){return ln.get(e,tn[e]+"")}},sn=t();var ln={listener:sn,get:function(e,t){var n=window.localStorage.getItem(e)||t||"",i=parseInt(n);if(!isNaN(i)&&/^\d+$/.test(n))return i;if("true"==n||"false"==n)return"true"==n;try{n=JSON.parse(n)}catch(e){}return n},set:function(e,t){if(o.isObject(t)||o.isArray(t)){var n=JSON.stringify(t);window.localStorage.setItem(e,n)}else window.localStorage.setItem(e,t);sn.send("change",{name:e,value:t})},field:function(e){return rn.field(e)}};var cn,dn,un,vn,gn,fn={init:function(){"undefined"!=typeof webOS?ln.set("platform","webos"):"undefined"!=typeof webapis&&"undefined"!=typeof tizen?ln.set("platform","tizen"):ln.set("platform",""),ln.set("native",!!ln.get("platform"))},get:function(){return ln.get("platform","")}},pn=Date.now(),mn=Date.now(),hn=1;function _n(){if(!vn){vn=!0;try{un.SetBannerState(1),un.unregistKey(dn.KEY_VOL_UP),un.unregistKey(dn.KEY_VOL_DOWN),un.unregistKey(dn.KEY_MUTE),un.unregistKey(dn.KEY_TOOLS)}catch(e){}try{caph.platform.dtv.Device.plugin("NNAVI").SetBannerState(1),caph.platform.dtv.Device.unRegisterKey(caph.platform.Key.VOL_UP),caph.platform.dtv.Device.unRegisterKey(caph.platform.Key.VOL_DOWN),caph.platform.dtv.Device.unRegisterKey(caph.platform.Key.MUTE)}catch(e){}}}function bn(){try{"undefined"!=typeof Common&&Common.API&&Common.API.TVKeyValue&&Common.API.Plugin&&Common.API.Widget?(cn=new Common.API.Widget,dn=new Common.API.TVKeyValue,un=new Common.API.Plugin,window.onShow=_n,setTimeout((function(){_n()}),2e3),cn.sendReadyEvent()):pn+5e3>Date.now()&&setTimeout(bn,50)}catch(e){}}var yn,wn,kn={init:function(){$("body").append($('<div style="position: absolute; left: -1000px; top: -1000px;">\n    <object id="pluginObjectNNavi" border="0" classid="clsid:SAMSUNG-INFOLINK-NNAVI" style="opacity: 0.0; background-color: #000; width: 1px; height: 1px;"></object>\n    <object id="pluginObjectTVMW" border="0" classid="clsid:SAMSUNG-INFOLINK-TVMW" style="opacity: 0.0; background-color: #000; width: 1px; height: 1px;"></object>\n</div>')),h.putScript(["$MANAGER_WIDGET/Common/API/Widget.js","$MANAGER_WIDGET/Common/API/TVKeyValue.js","$MANAGER_WIDGET/Common/API/Plugin.js","$CAPH/1.0.0/caph-level1-unified.min.js","$MANAGER_WIDGET/Common/webapi/1.0/webapis.js"],(function(){window.addEventListener("keydown",(function(e){try{switch(e.keyCode){case dn.KEY_RETURN:window.history.back(),cn.blockNavigation(e);break;case dn.KEY_VOLUME_UP:webapis.audiocontrol.setVolumeUp();break;case dn.KEY_VOLUME_DOWN:webapis.audiocontrol.setVolumeDown();break;case dn.KEY_VOL_UP:webapis.audiocontrol.setVolumeUp();break;case dn.KEY_VOL_DOWN:webapis.audiocontrol.setVolumeDown();break;case dn.KEY_MUTE:webapis.audiocontrol.getMute?webapis.audiocontrol.setMute(0):webapis.audiocontrol.setMute(1);break;case dn.KEY_EXIT:mn+200<Date.now()?hn=1:hn++,hn>=2?cn.sendExitEvent(e):cn.sendReturnEvent(e),clearTimeout(gn),gn=setTimeout((function(){mn=Date.now()}),200)}}catch(e){}})),bn()}))}},Sn=[];var xn={render:function(){return yn},init:function(){(yn=r.get("menu")).find(".selector").on("hover:enter",(function(e){var t,n=$(e.target).data("action"),i=$(e.target).data("type");"catalog"==n&&(t=[],Sn.forEach((function(e){t.push({title:e.name,id:e.id})})),F.show({title:"Каталог",items:t,onSelect:function(e){It.push({url:"movie",title:e.title,component:"category",genres:e.id})},onBack:function(){Yt.toggle("menu")}})),"movie"!=n&&"tv"!=n||It.push({url:n,title:"movie"==n?"Фильмы":"Сериалы",component:"category"}),"main"==n&&It.push({url:"",title:"Главная",component:"main"}),"search"==n&&Yt.toggle("search"),"settings"==n&&Yt.toggle("settings"),"about"==n&&_e.open({title:"О приложении",html:r.get("about"),size:"medium",onBack:function(){_e.close(),Yt.toggle("content")}}),"favorite"==n&&It.push({url:"",title:"book"==i?"Закладки":"like"==i?"Нравится":"Позже",component:"favorite",type:i,page:1})})).on("hover:focus",(function(e){wn=e.target})),M.genres({},(function(e){Sn=e.genres})),Yt.add("menu",{toggle:function(){Yt.collectionSet(yn),Yt.collectionFocus(wn,yn),$("body").toggleClass("menu--open",!0)},right:function(){Yt.toggle("content")},up:function(){Navigator.canmove("up")?Navigator.move("up"):Yt.toggle("head")},down:function(){Navigator.move("down")},gone:function(){$("body").toggleClass("menu--open",!1)},back:function(){It.backward()}})}};function Cn(e){var t,n=new c({mask:!0,over:!0}),i=r.get("settings_"+e);ln.get("native")&&i.find(".is--torllok").remove(),n.render().find(".scroll__content").addClass("layer--wheight").data("mheight",$(".settings__head")),i.find(".selector").on("hover:focus",(function(e){t=e.target,n.update($(e.target),!0)})),rn.bind(i.find(".selector")),Yt.add("settings_component",{toggle:function(){Yt.collectionSet(i),Yt.collectionFocus(t,i)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){n.destroy(),i.remove(),Yt.toggle("settings")}}),this.destroy=function(){n.destroy(),i.remove(),i=null},this.render=function(){return n.render(i)}}var Tn=r.get("settings"),Mn=Tn.find(".settings__body");var Nn=new function(){var e,t,n=this,i=new c({mask:!0,over:!0});this.create=function(){(e=r.get("settings_main")).find(".selector").on("hover:focus",(function(e){t=e.target,i.update($(e.target),!0)})).on("hover:enter",(function(e){n.render().detach(),n.onCreate($(e.target).data("component"))}))},this.active=function(){Yt.collectionSet(e),Yt.collectionFocus(t,e)},this.render=function(){return i.render(e)}};Nn.onCreate=function(e){var t=new Cn(e);Mn.empty().append(t.render()),Yt.toggle("settings_component")},Nn.create(),Yt.add("settings",{toggle:function(){Mn.empty().append(Nn.render()),Nn.active(),$("body").toggleClass("settings--open",!0)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},left:function(){Nn.render().detach(),Yt.toggle("content")},gone:function(e){"settings_component"!==e&&$("body").toggleClass("settings--open",!1)},back:function(){Nn.render().detach(),Yt.toggle("head")}});var zn={render:function(){return Tn}};function An(){var e,n,i,a=[],r=0;this.listener=t(),this.create=function(){e=new c({over:!0})},this.search=function(e){var t=this;clearTimeout(n),i=e,n=setTimeout((function(){M.search({query:encodeURIComponent(e)},(function(e){t.clear(),e.movie&&e.movie.results.length&&t.build(e.movie,"movie"),e.tv&&e.tv.results.length&&t.build(e.tv,"tv"),Yt.enable("search_results")}))}),1e3)},this.build=function(t,n){var o=this,r=new ae(t,{align_left:!0});r.onDown=this.down,r.onUp=this.up,r.onBack=this.back.bind(this),r.onLeft=function(){o.listener.send("left")},r.onEnter=function(){o.listener.send("enter")},r.onMore=function(){It.push({url:"search/"+n,title:"Поиск - "+i,component:"category_full",page:2,query:encodeURIComponent(i)})},r.create(),a.push(r),e.append(r.render())},this.back=function(){this.listener.send("back")},this.down=function(){r++,r=Math.min(r,a.length-1),a[r].toggle(),e.update(a[r].render())},this.up=function(){--r<0?r=0:a[r].toggle(),e.update(a[r].render())},this.clear=function(){e.reset(),r=0,o.destroy(a),a=[]},this.toggle=function(){var t=this;Yt.add("search_results",{invisible:!0,toggle:function(){Yt.collectionSet(e.render()),a.length&&a[0].toggle()},back:function(){t.listener.send("back")},left:function(){t.listener.send("left")}}),Yt.toggle("search_results")},this.render=function(){return e.render()},this.destroy=function(){clearTimeout(n),this.clear(),e.destroy(),this.listener.destroy()}}function Fn(){var e,n,i=[];this.listener=t(),this.create=function(){var t=this;e=new c({over:!0,mask:!1,nopadding:!0}),(i=ln.get("search_history","[]")).forEach((function(e){t.append(e)}))},this.append=function(t){var i=this,o=$('<div class="search-history-key selector"><div>'+t+"</div></div>");o.on("hover:enter",(function(){i.listener.send("enter",{value:t})})).on("hover:focus",(function(t){n=t.target,e.update($(t.target))})),e.append(o)},this.add=function(e){-1==i.indexOf(e)&&(o.insert(i,0,e),ln.set("search_history",i))},this.toggle=function(){var t=this;Yt.add("search_history",{toggle:function(){Yt.collectionSet(e.render()),Yt.collectionFocus(n,e.render())},up:function(){Navigator.canmove("up")?Navigator.move("up"):t.listener.send("up")},down:function(){Navigator.move("down")},right:function(){t.listener.send("right")},back:function(){t.listener.send("back")}}),Yt.toggle("search_history")},this.render=function(){return e.render()},this.destroy=function(){e.destroy(),this.listener.destroy(),i=null,n=null}}var Dn,En,Bn,Rn,Vn=$("<div></div>"),On="";function Pn(){Dn=r.get("search"),Vn.append(Dn),(Bn=new Fn).create(),Bn.listener.follow("right",(function(){En.toggle()})),Bn.listener.follow("up",(function(){Rn.toggle()})),Bn.listener.follow("enter",(function(e){En.clear(),Rn.value(e.value),En.toggle()})),Bn.listener.follow("back",Ln),Dn.find(".search__history").append(Bn.render()),(En=new An).create(),En.listener.follow("left",(function(){Rn.toggle()})),En.listener.follow("enter",(function(){On&&Bn.add(On),Ln()})),En.listener.follow("back",Ln),Dn.find(".search__results").append(En.render()),(Rn=new qt({layout:{en:["1 2 3 4 5 6 7 8 9 0","q w e r t y u i o p","a s d f g h j k l","z x c v b n m","{RU} {space} {bksp}"],default:["1 2 3 4 5 6 7 8 9 0","й ц у к е н г ш щ з х ъ","ф ы в а п р о л д ж э","я ч с м и т ь б ю","{EN} {space} {bksp}"]}})).create(),Rn.listener.follow("change",(function(e){(On=e.value.trim())?(Dn.find(".search__input").text(On),En.search(On)):Dn.find(".search__input").text("Введите текст...")})),Rn.listener.follow("right",(function(){En.toggle()})),Rn.listener.follow("down",(function(){Bn.toggle()})),Rn.listener.follow("back",Ln),Rn.toggle()}function Ln(){Rn.destroy(),En.destroy(),Bn.destroy(),Dn.remove(),Vn.empty(),Yt.toggle("content")}Yt.add("search",{invisible:!0,toggle:function(){Pn()},back:Ln});var $n={render:function(){return Vn}};var In,jn={app:function(){var e=$("#app").empty(),t=r.get("wrap");t.find(".wrap__left").append(xn.render()),t.find(".wrap__content").append(It.render()),e.append(ie.render()),e.append(xt.render()),e.append(t),e.append(zn.render()),e.append($n.render())}},Gn=!1,Un=t(),Kn=0,Hn=0;function Jn(e){Gn=e,Un.send("toggle",{status:Gn})}function Wn(e){return 13==e||29443==e||117==e||65385==e}function Zn(e){var t;return window.event?t=e.keyCode:e.which&&(t=e.which),t}window.addEventListener("keydown",(function(e){Hn=Zn(e),Kn=Date.now(),In||(In=setTimeout((function(){Wn(Hn)&&(Un.send("longdown",{}),Yt.long())}),800))})),window.addEventListener("keyup",(function(e){clearTimeout(In),In=null,Date.now()-Kn>40&&Wn(Zn(e))&&Yt.enter()})),window.addEventListener("keydown",(function(e){var t=Zn(e);if(Un.send("keydown",{code:t,enabled:Gn}),!Wn(t)&&Gn){if(37!=t&&4!=t||Yt.move("left"),38!=t&&29460!=t||Yt.move("up"),39!=t&&5!=t||Yt.move("right"),40!=t&&29461!=t||Yt.move("down"),33!=t&&427!=t||Yt.move("toup"),34!=t&&428!=t||Yt.move("todown"),32!=t&&179!=t||Yt.trigger("playpause"),415!=t&&71!=t||Yt.trigger("play"),413==t&&Yt.trigger("stop"),412!=t&&69!=t&&177!=t||Yt.trigger("rewindBack"),418!=t&&417!=t&&72!=t&&176!=t||Yt.trigger("rewindForward"),19!=t&&74!=t||Yt.trigger("pause"),457==t&&Yt.trigger("info"),10146==t&&e.preventDefault(),10133==t&&Yt.toggle("settings"),8==t||27==t||461==t||10009==t||88==t)return e.preventDefault(),It.back(),!1;e.preventDefault()}}));var Yn,qn,Xn={listener:Un,enable:function(){Jn(!0)},disable:function(){Jn(!1)}},Qn=[],ei=0;function ti(e){try{o.insert(Qn,0,'<div class="console__line selector"><span>'+e+"</span></div>")}catch(e){o.insert(Qn,0,'<div class="console__line selector"><span>Failed to print line</span></div>')}Qn.length>50&&Qn.pop()}function ni(e){if(o.isObject(e)||o.isArray(e))e=JSON.stringify(e);else if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)e=(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");else{var t=[];for(var n in e)t.push(n+": "+e[n]);e=JSON.stringify(t)}return e=h.shortText(e,600)}({init:function(){var e;Xn.listener.follow("keydown",(function(e){38!=e.code&&29460!=e.code||("head"==Yt.enabled().name?++ei>10&&Yt.toggle("console"):ei=0)})),Yt.add("console",{toggle:function(){Yn=r.get("console"),(qn=new c({over:!0})).minus(),Qn.forEach((function(e){var t=$(e);t.on("hover:focus",(function(e){qn.update($(e.target))})),qn.append(t)})),Yn.append(qn.render()),$("body").append(Yn),Yt.collectionSet(Yn),Yt.collectionFocus(!1,Yn)},up:function(){Navigator.move("up")},down:function(){Navigator.move("down")},back:function(){ei=0,qn.destroy(),Yn.remove(),Yt.toggle("head")}}),e=console.log,console.log=function(){for(var t=[],n=[];arguments.length;){var i=[].shift.call(arguments);t.push(ni(i)),n.push(i)}t[0]='<span style="color: '+h.stringToHslColor(t[0],50,65)+'">'+t[0]+"</span>",ti(t.join(" ")),e.apply(console,n)},window.addEventListener("error",(function(e){ti((e.error||e).message+"<br><br>"+(e.error?e.error.stack:e.stack||"").split("\n").join("<br>"))}))}}).init(),fn.init(),p.init(),ie.init(),yt.init(),xt.init(),xn.init(),It.init(),kn.init(),R.init(),r.get("styles").appendTo("body"),Yt.listener.follow("toggle",(function(){R.update()})),It.listener.follow("backward",(function(e){if(1==e.count){var t=Yt.enabled();F.show({title:"Выход",items:[{title:"Да выйти",out:!0},{title:"Продолжить"}],onSelect:function(e){e.out?(It.out(),Yt.toggle(t.name),"tizen"==fn.get()&&tizen.application.getCurrentApplication().exit(),"webos"==fn.get()&&window.close()):Yt.toggle(t.name)},onBack:function(){Yt.toggle(t.name)}})}})),Navigator.follow("focus",(function(e){Yt.focus(e.elem)})),jn.app(),It.last(),setTimeout((function(){Xn.enable(),$(".welcome").fadeOut(500)}),1e3),h.putScript(["https://js.sentry-cdn.com/6e63d90a0fc743f3a4bc219d9849fc62.min.js"],(function(){}))}();